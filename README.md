
# üõ°Ô∏è Arena Survivors ‚Äî –í–µ—Ä—Å–∏—è 2: –ì–µ—Ä–æ–∏ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

> **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞**  
> *–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –≥–µ—Ä–æ–µ–≤, —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è, –ø–∞—Å—Å–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ UI*

---

## ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –≤–µ—Ä—Å–∏–∏ 2

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —É –Ω–∞—Å –±—ã–ª —Ç–æ–ª—å–∫–æ —Å–∫–µ–ª–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —ç–∫—Ä–∞–Ω–æ–≤ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –í–æ –≤—Ç–æ—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –º—ã –¥–æ–±–∞–≤–∏–º:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
|-----------|-----------------|
| **–ö–ª–∞—Å—Å Hero** | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å —Å —É—Ä–æ–≤–Ω–µ–º, –æ–ø—ã—Ç–æ–º, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—ë–º –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–æ–π |
| **–°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞** | –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, –æ—á–∫–∏ –Ω–∞–≤—ã–∫–æ–≤ –∫–∞–∂–¥—ã–µ 3 —É—Ä–æ–≤–Ω—è |
| **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å** | 9 —Å–ª–æ—Ç–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ |
| **–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞** | –°–ª–æ—Ç—ã –æ—Ä—É–∂–∏—è, –±—Ä–æ–Ω–∏, –∞–∫—Å–µ—Å—Å—É–∞—Ä–∞ —Å –±–æ–Ω—É—Å–∞–º–∏ –∫ —Å—Ç–∞—Ç–∞–º |
| **–ü–∞—Å—Å–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** | –†–µ—Å—É—Ä—Å—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∑–∞ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –≥–µ—Ä–æ—è |
| **UI –ì–µ—Ä–æ–µ–≤** | –ö–∞—Ä—Ç–æ—á–∫–∏ –≥–µ—Ä–æ–µ–≤ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç–∞—Ç–æ–≤, –æ–ø—ã—Ç–∞, –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è |
| **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ** | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–µ—Ä–æ—è |

**–ò—Ç–æ–≥:** —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –±—É–¥–µ—Ç –∏–≥—Ä–∞—é—â–∞—è –æ—Å–Ω–æ–≤–∞ ‚Äî –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –≥–µ—Ä–æ—è, —Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –∫–æ–ø–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏ "–Ω–∞—á–∏–Ω–∞—Ç—å –º–∞—Ç—á" (–ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ —Ç—Ä–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤).

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. –ö–ª–∞—Å—Å Hero (`js/core/Hero.js`)

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏ —Å–≤–æ–π—Å—Ç–≤–∞
```javascript
constructor(id, name, baseStats, type) {
    this.id = id;
    this.name = name;
    this.type = type; // 'warrior', 'archer', 'mage'
    this.level = 1;
    this.exp = 0;
    this.expToNextLevel = 100; // –æ–ø—ã—Ç –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
    
    // –ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Ä–∞—Å—Ç—É—Ç —Å —É—Ä–æ–≤–Ω–µ–º)
    this.baseStats = { hp, attack, defense, speed };
    
    // –¢–µ–∫—É—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å —É—á—ë—Ç–æ–º —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏)
    this.currentStats = { ...this.baseStats };
    
    // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (9 —Å–ª–æ—Ç–æ–≤)
    this.inventory = new Array(9).fill(null);
    
    // –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞ (–æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—è, –∞–∫—Å–µ—Å—Å—É–∞—Ä)
    this.equipment = { weapon: null, armor: null, accessory: null };
    
    // –ù–∞–≤—ã–∫–∏ –∏ –æ—á–∫–∏ –Ω–∞–≤—ã–∫–æ–≤ (–∫–∞–∂–¥—ã–µ 3 —É—Ä–æ–≤–Ω—è)
    this.skills = [];
    this.skillPoints = 0;
}
```

#### –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω—è –∏ –æ–ø—ã—Ç–∞
```javascript
addExp(amount) {
    this.exp += amount;
    while (this.exp >= this.expToNextLevel) {
        this.levelUp(); // –ü–æ–≤—ã—à–∞–µ–º —É—Ä–æ–≤–µ–Ω—å, –ø–æ–∫–∞ —Ö–≤–∞—Ç–∞–µ—Ç –æ–ø—ã—Ç–∞
    }
}

levelUp() {
    this.level++;
    this.exp -= this.expToNextLevel;
    this.expToNextLevel = Math.floor(this.expToNextLevel * 1.5); // –†–∞—Å—Ç—ë—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ
    
    // –£–ª—É—á—à–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    this.baseStats.hp += 10;
    this.baseStats.attack += 2;
    this.baseStats.defense += 1;
    
    // –ö–∞–∂–¥—ã–µ 3 —É—Ä–æ–≤–Ω—è ‚Äî –æ—á–∫–æ –Ω–∞–≤—ã–∫–∞
    if (this.level % 3 === 0) {
        this.skillPoints++;
    }
    
    this.updateCurrentStats(); // –ü–µ—Ä–µ—Å—á—ë—Ç —Å —É—á—ë—Ç–æ–º —à–º–æ—Ç–∞
}
```

#### –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞
```javascript
addToInventory(item) {
    // –ò—â–µ–º –ø–µ—Ä–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ª–æ—Ç
    const emptySlot = this.inventory.findIndex(slot => slot === null);
    if (emptySlot !== -1) {
        this.inventory[emptySlot] = item;
        return true;
    }
    return false; // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ–ª–æ–Ω
}

equip(item, slot) {
    this.equipment[slot] = item;
    this.updateCurrentStats(); // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç—ã —Å –±–æ–Ω—É—Å–∞–º–∏ –æ—Ç —à–º–æ—Ç–∞
}

useConsumable(slotIndex) {
    const item = this.inventory[slotIndex];
    if (item && item.type === 'consumable') {
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç (–ª–µ—á–µ–Ω–∏–µ –∏ —Ç.–¥.)
        if (item.effect === 'heal') {
            this.currentStats.hp += item.value;
        }
        this.inventory[slotIndex] = null; // –ü—Ä–µ–¥–º–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
        return true;
    }
    return false;
}
```

**–í–∞–∂–Ω–æ:** `updateCurrentStats()` —Å—É–º–º–∏—Ä—É–µ—Ç –±–∞–∑–æ–≤—ã–µ —Å—Ç–∞—Ç—ã –∏ –±–æ–Ω—É—Å—ã –æ—Ç –≤—Å–µ–π —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏.

---

### 2. GameState —Å –ø–∞—Å—Å–∏–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π (`js/core/GameState.js`)

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**

#### –ü–∞—Å—Å–∏–≤–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤
```javascript
passiveUpdate() {
    const now = Date.now();
    const diffSeconds = Math.floor((now - this.lastPassiveUpdate) / 1000);
    
    if (diffSeconds >= 1) {
        let resourcesGained = { proviziya: 0, toplivo: 0, instrumenty: 0 };
        
        // –ö–∞–∂–¥—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π –≥–µ—Ä–æ–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
        this.heroes.forEach(hero => {
            if (hero.isUnlocked) {
                resourcesGained.proviziya += 0.1 * diffSeconds;
                resourcesGained.toplivo += 0.1 * diffSeconds;
                resourcesGained.instrumenty += 0.1 * diffSeconds;
            }
        });
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ (—Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º)
        this.resources.proviziya += resourcesGained.proviziya;
        this.resources.toplivo += resourcesGained.toplivo;
        this.resources.instrumenty += resourcesGained.instrumenty;
        
        this.lastPassiveUpdate = now;
        this.notify();
    }
}
```

#### –í—ã–±–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ –≥–µ—Ä–æ—è
```javascript
selectHero(heroId) {
    this.currentHeroId = heroId;
    this.notify();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —à–∞–ø–∫–µ
    const heroNameSpan = document.getElementById('currentHeroName');
    const hero = this.heroes.find(h => h.id === heroId);
    heroNameSpan.textContent = `–ì–µ—Ä–æ–π: ${hero ? hero.name : '–ù–µ –≤—ã–±—Ä–∞–Ω'}`;
}
```

#### –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```javascript
setInterval(() => {
    window.GameState.passiveUpdate();
}, 1000); // –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏
```

---

### 3. UIManager —Å –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π –≥–µ—Ä–æ–µ–≤ (`js/ui/UIManager.js`)

**–ì–ª–∞–≤–Ω–æ–µ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–µ:** –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –≥–µ—Ä–æ–µ–≤.

#### –ú–µ—Ç–æ–¥ renderHeroes()
```javascript
renderHeroes() {
    const container = document.getElementById('heroesList');
    container.innerHTML = '';
    
    window.GameState.heroes.forEach(hero => {
        const heroCard = document.createElement('div');
        heroCard.className = 'hero-card';
        
        // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–µ—Ä–æ—è
        if (hero.id === window.GameState.currentHeroId) {
            heroCard.style.border = '2px solid #e94560';
        }
        
        heroCard.innerHTML = `
            <h3>${hero.name} (–£—Ä. ${hero.level})</h3>
            <div class="hero-stats">
                <p>‚ù§Ô∏è HP: ${hero.currentStats.hp}</p>
                <p>‚öîÔ∏è –ê—Ç–∞–∫–∞: ${hero.currentStats.attack}</p>
                <p>üõ°Ô∏è –ó–∞—â–∏—Ç–∞: ${hero.currentStats.defense}</p>
            </div>
            <div class="hero-exp">
                <progress value="${hero.exp}" max="${hero.expToNextLevel}"></progress>
                <p>${hero.exp}/${hero.expToNextLevel} –æ–ø—ã—Ç–∞</p>
            </div>
            <div class="hero-skills">
                <p>üéØ –û—á–∫–∏ –Ω–∞–≤—ã–∫–æ–≤: ${hero.skillPoints}</p>
            </div>
            <button class="select-hero-btn" data-hero-id="${hero.id}">–í—ã–±—Ä–∞—Ç—å –¥–ª—è –±–æ—è</button>
            <button class="inventory-hero-btn" data-hero-id="${hero.id}">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
        `;
        
        container.appendChild(heroCard);
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    this.attachHeroButtonListeners();
}
```

#### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
```javascript
showHeroInventory(heroId) {
    const hero = window.GameState.heroes.find(h => h.id === heroId);
    
    modalBody.innerHTML = `
        <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ${hero.name}</h2>
        <div class="inventory-grid">
            ${hero.inventory.map((item, index) => {
                if (item) {
                    return `<div class="inventory-slot">
                        ${item.icon || 'üì¶'} ${item.name}
                    </div>`;
                } else {
                    return `<div class="inventory-slot empty">–ü—É—Å—Ç–æ</div>`;
                }
            }).join('')}
        </div>
        <h3>–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞</h3>
        <div class="equipment-grid">
            <div>–û—Ä—É–∂–∏–µ: ${hero.equipment.weapon?.name || '–ü—É—Å—Ç–æ'}</div>
            <div>–ë—Ä–æ–Ω—è: ${hero.equipment.armor?.name || '–ü—É—Å—Ç–æ'}</div>
            <div>–ê–∫—Å–µ—Å—Å—É–∞—Ä: ${hero.equipment.accessory?.name || '–ü—É—Å—Ç–æ'}</div>
        </div>
    `;
    
    document.getElementById('heroModal').style.display = 'block';
}
```

---

### 4. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ game.js

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä—ë—Ö –≥–µ—Ä–æ–µ–≤** —Å —Ä–∞–∑–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:
   - –í–æ–∏–Ω (–º–Ω–æ–≥–æ HP, —Å—Ä–µ–¥–Ω—è—è –∞—Ç–∞–∫–∞)
   - –õ—É—á–Ω–∏–∫ (–≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
   - –ú–∞–≥ (–≤—ã—Å–æ–∫–∞—è –∞—Ç–∞–∫–∞, –º–∞–ª–æ –∑–∞—â–∏—Ç—ã)

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤** –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –í–æ–∏–Ω–∞:
   - –ú–∞–ª–æ–µ –∑–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è (—Ä–∞—Å—Ö–æ–¥–Ω–∏–∫)
   - –ú–µ—á (–æ—Ä—É–∂–∏–µ —Å –±–æ–Ω—É—Å–æ–º –∞—Ç–∞–∫–∏)

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ –≥–µ—Ä–æ—è**

4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∞—Ç—á–∞:
   ```javascript
   if (!window.GameState.getCurrentHero()) {
       alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–µ—Ä–æ—è!');
       return;
   }
   ```

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—á–µ–º—É –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏–º–µ–Ω–Ω–æ —Ç–∞–∫?

| –†–µ—à–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|---------|-------------|
| **Hero –∫–∞–∫ –∫–ª–∞—Å—Å** | –ö–∞–∂–¥—ã–π –≥–µ—Ä–æ–π ‚Äî —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏. –õ–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã—Ö –≥–µ—Ä–æ–µ–≤. |
| **currentStats vs baseStats** | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–æ–≤—ã–µ –∏ —Ç–µ–∫—É—â–∏–µ —Å—Ç–∞—Ç—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –±–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏. |
| **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∫–∞–∫ –º–∞—Å—Å–∏–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã** | 9 —Å–ª–æ—Ç–æ–≤ –∑–∞–¥–∞–Ω—ã –∂—ë—Å—Ç–∫–æ, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å–µ—Ç–∫–∏ 3x3. |
| **–ü–∞—Å—Å–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ setInterval** | –ü—Ä–æ—Å—Ç–∞—è –∏–º–∏—Ç–∞—Ü–∏—è "—Ñ–æ–Ω–æ–≤–æ–≥–æ" –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞, –Ω–µ —Ç—Ä–µ–±—É—é—â–∞—è —Å–µ—Ä–≤–µ—Ä–∞. |
| **–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ GameState** | –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. |

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º

1. **–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å (Observer)** ‚Äî `GameState.subscribe()` –ø–æ–∑–≤–æ–ª—è–µ—Ç UI —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
2. **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (Single Source of Truth)** ‚Äî –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤ GameState.
3. **–§–∞–±—Ä–∏–∫–∞ (Factory)** ‚Äî –≤ `game.js` –º—ã —Å–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –≥–µ—Ä–æ–µ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø: –ú–∞–≥–∞–∑–∏–Ω –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –≥–µ—Ä–æ–∏ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã.

### –ß—Ç–æ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –≤–µ—Ä—Å–∏–∏ 3

#### 1. –ö–ª–∞—Å—Å Item (`js/core/Item.js`)
```javascript
class Item {
    constructor(id, name, type, rarity, price, statsBonus = {}, effect = null) {
        this.id = id;
        this.name = name;
        this.type = type; // 'weapon', 'armor', 'consumable'
        this.rarity = rarity; // 'common', 'rare', 'epic'
        this.price = price; // —Ü–µ–Ω–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        this.statsBonus = statsBonus; // { attack: +5, hp: +10 }
        this.effect = effect; // –¥–ª—è —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤: { heal: 30 }
        this.icon = this.getIcon();
    }
    
    getIcon() {
        const icons = {
            weapon: '‚öîÔ∏è',
            armor: 'üõ°Ô∏è',
            consumable: 'üß™'
        };
        return icons[this.type] || 'üì¶';
    }
}
```

#### 2. –≠–∫—Ä–∞–Ω –º–∞–≥–∞–∑–∏–Ω–∞ (`js/ui/ShopScreen.js`)
- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–µ—Ä–æ—è

#### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GameState
```javascript
buyItem(itemId, heroId) {
    const item = shopItems.find(i => i.id === itemId);
    const hero = this.heroes.find(h => h.id === heroId);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
    if (this.resources.proviziya >= item.price) {
        this.resources.proviziya -= item.price;
        hero.addToInventory(item);
        this.notify();
        return true;
    }
    return false;
}
```

#### 4. –í–∞–ª—é—Ç–∞ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
–ù—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å GameState –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–∞–ª—é—Ç:
```javascript
resources: {
    proviziya: 10,  // –û—Å–Ω–æ–≤–Ω–∞—è –≤–∞–ª—é—Ç–∞
    toplivo: 5,     // –î–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
    instrumenty: 3,  // –î–ª—è –∫—Ä–∞—Ñ—Ç–∞
    gold: 100       // –í–æ–∑–º–æ–∂–Ω–æ, –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–º–∏—É–º-–≤–∞–ª—é—Ç—É
}
```

---

## üéØ –ó–∞–¥–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

1. **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è**
   - –°–æ–∑–¥–∞—Ç—å –≥–µ—Ä–æ—è –∫–ª–∞—Å—Å–∞ "–†–∞–∑–±–æ–π–Ω–∏–∫" —Å –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–Ω–æ–º, –Ω–æ –Ω–∏–∑–∫–∏–º HP
   - –î–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤ –≥–µ—Ä–æ–µ–≤ –≤ `game.js`

2. **–£–ª—É—á—à–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (‚öîÔ∏è –¥–ª—è –æ—Ä—É–∂–∏—è, üõ°Ô∏è –¥–ª—è –±—Ä–æ–Ω–∏, üß™ –¥–ª—è –∑–µ–ª–∏–π)
   - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ

3. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–µ—Ä–æ—è**
   - –°–µ–π—á–∞—Å –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞–º–∫–æ–π, –¥–æ–±–∞–≤–∏—Ç—å –≥–∞–ª–æ—á–∫—É ‚úì –∏–ª–∏ –ø–æ–¥—Å–≤–µ—Ç–∫—É –∏–º–µ–Ω–∏
   - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ –∏–ª–∏ —Å–æ–≤—Å–µ–º –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ —Ç–∞–ø—É –≤—ã–±–æ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–ª–∏ –æ—Ç–º–µ–Ω–∞

4. **–°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∑–∞ –º–∞—Ç—á–∏**
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞—á–∞—Ç—å –º–∞—Ç—á" –¥–æ–±–∞–≤–ª—è—Ç—å –≥–µ—Ä–æ—é 10 –æ–ø—ã—Ç–∞
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å –ø–µ—Ä–µ—Å—á—ë—Ç–æ–º —Å—Ç–∞—Ç–æ–≤

5. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–∞—Å—Å–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
   - –°–µ–π—á–∞—Å –≤—Å–µ –≥–µ—Ä–æ–∏ –¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤
   - –°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≥–µ—Ä–æ–µ–≤ –¥–∞–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–í–æ–∏–Ω ‚Üí –ø—Ä–æ–≤–∏–∑–∏—è, –†–∞–∑–±–æ–π–Ω–∏–∫ ‚Üí —Ç–æ–ø–ª–∏–≤–æ –∏ —Ç.–¥.)

---

## üí° –ò—Ç–æ–≥–∏ –≤–µ—Ä—Å–∏–∏ 2

–ú—ã –ø—Ä–æ—à–ª–∏ –±–æ–ª—å—à–æ–π –ø—É—Ç—å:
- ‚úÖ –°–æ–∑–¥–∞–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≥–µ—Ä–æ–µ–≤ —Å —É—Ä–æ–≤–Ω–µ–º –∏ –æ–ø—ã—Ç–æ–º
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É
- ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ –ø–∞—Å—Å–∏–≤–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ù–∞—É—á–∏–ª–∏—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –°–≤—è–∑–∞–ª–∏ –≤—Å–µ –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ GameState

**–¢–µ–ø–µ—Ä—å –∏–≥—Ä–∞ —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –∂–∏–≤–æ–π** ‚Äî –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –≥–µ—Ä–æ—è, –∫–æ–ø–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã, —Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏–∫—É –∏ –º–∞–≥–∞–∑–∏–Ω, —á—Ç–æ–±—ã –±—ã–ª–æ –Ω–∞ —á—Ç–æ —Ç—Ä–∞—Ç–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã.

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [MDN: Classes](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Classes)
- [–ü–∞—Ç—Ç–µ—Ä–Ω –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –≤ JavaScript](https://proglib.io/p/nablyudatel-observer-na-javascript-2021-03-08)
- [localStorage –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö](https://learn.javascript.ru/localstorage)

---
