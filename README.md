[![–ò—Ç–µ—Ä–∞—Ü–∏—è 1 - –ì–æ—Ç–æ–≤–∞](https://img.shields.io/badge/–ò—Ç–µ—Ä–∞—Ü–∏—è_5-–ê—Ä–µ–Ω–∞_–∏_–í—Ä–∞–≥–∏-5e3830?style=for-the-badge)](##-–∏—Ç–µ—Ä–∞—Ü–∏—è-1-—Å–∫–µ–ª–µ—Ç-–∏-–Ω–∞–≤–∏–≥–∞—Ü–∏—è)

> [!NOTE]
> –û–±–Ω–æ–≤–ª–µ–Ω–æ 20.02.2026

<br>

> [!IMPORTANT]
> –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ–º –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏ –º–µ—Ç–æ–¥ –∏–∑ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞, –≤–∞–∂–Ω–æ –æ—à–∏–±–∫–∏ —Ñ–∏–∫—Å–∏—Ç—å —Å—Ä–∞–∑—É, —á—Ç–æ –±—ã –ø–æ—Ç–æ–º –Ω–µ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è.

<br>

> [!WARNING]
> –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - —ç—Ç–æ —Å–Ω–∏–∂–µ–Ω–∏–µ –±–∞–ª–∞ –∑–∞ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –±–∞–ª–∞ –∑–∞ –∑–∞—á–µ—Ç.


---

# üõ°Ô∏è Arena Survivors v0.0.5: –î–æ–±–∞–≤–ª—è–µ–º –±–æ–µ–≤—É—é –∞—Ä–µ–Ω—É (Survivors-style)

–ü—Ä–∏–≤–µ—Ç, –∫–æ–º–∞–Ω–¥–∞! –í —á–µ—Ç–≤–µ—Ä—Ç–æ–π –≤–µ—Ä—Å–∏–∏ —É –Ω–∞—Å –ø–æ—è–≤–∏–ª–∞—Å—å —Å–∏—Å—Ç–µ–º–∞ –∫—Ä–∞—Ñ—Ç–∞. –¢–µ–ø–µ—Ä—å –º—ã –¥–æ–±–∞–≤–∏–º **–Ω–∞—Å—Ç–æ—è—â—É—é –±–æ–µ–≤—É—é –∞—Ä–µ–Ω—É** –≤ —Å—Ç–∏–ª–µ Survivors-like –∏–≥—Ä:

**–ß—Ç–æ –Ω–æ–≤–æ–≥–æ:**
- –ë–æ–ª—å—à–æ–π –º–∏—Ä (2400x1800), –∫–∞–º–µ—Ä–∞ —Å–ª–µ–¥–∏—Ç –∑–∞ –≥–µ—Ä–æ–µ–º
- –í—Ä–∞–≥–∏ —Å–ø–∞–≤–Ω—è—Ç—Å—è –≤–æ–ª–Ω–∞–º–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
- –°–∏—Å—Ç–µ–º–∞ –æ—Ä—É–∂–∏—è (–±–ª–∏–∂–Ω–∏–π –∏ –¥–∞–ª—å–Ω–∏–π –±–æ–π)
- –ö—Ä–∏—Å—Ç–∞–ª–ª—ã –æ–ø—ã—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–∞–¥–∞—é—Ç –∏–∑ –≤—Ä–∞–≥–æ–≤
- –î–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ü–∞—É–∑–∞ –∏ –≤—ã—Ö–æ–¥ —Å –∞—Ä–µ–Ω—ã

**–í–∞–∂–Ω–æ:** –ú—ã –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º –∏–≥—Ä—É, –∞ **–¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –º–µ—Ç–æ–¥—ã** –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥. –ö–∞–∂–¥—ã–π —à–∞–≥ ‚Äî —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ, –∫—É–¥–∞ –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥.

---

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –ø–∞–ø–∫—É `arena/` —Å –ø—è—Ç—å—é —Ñ–∞–π–ª–∞–º–∏:

```
arena-survivors/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ style.css
‚îú‚îÄ‚îÄ arena_style.css (–ù–û–í–´–ô)
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ core/ ...
‚îÇ   ‚îú‚îÄ‚îÄ arena/ (–ù–û–í–ê–Ø –ü–ê–ü–ö–ê)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameEntity.js (–ù–û–í–´–ô)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SpriteManager.js (–ù–û–í–´–ô)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SurvivorsArena.js (–ù–û–í–´–ô)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ArenaController.js (–ù–û–í–´–ô)
‚îÇ   ‚îú‚îÄ‚îÄ ui/ ...
‚îÇ   ‚îî‚îÄ‚îÄ game.js (–æ–±–Ω–æ–≤–ª—è–µ–º)
```

---

## üé® –®–∞–≥ 1. –°–æ–∑–¥–∞—ë–º `arena_style.css`

–≠—Ç–æ –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π –¥–ª—è –∞—Ä–µ–Ω—ã. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ.

```css
/* ==============================
   Survivors-style –∞—Ä–µ–Ω–∞
   ============================== */

.arena-game-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background: #000;
    position: relative;
}

.arena-header {
    background: rgba(0, 0, 0, 0.8);
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 10;
}

.arena-stats {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.stat {
    color: white;
    font-size: 1.2rem;
}

#gameCanvas {
    flex: 1;
    width: 100%;
    background: #1a1a2e;
    display: block;
    touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ–º —Å–∫—Ä–æ–ª–ª –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
}

.joystick-container {
    position: absolute;
    bottom: 30px;
    left: 30px;
    width: 120px;
    height: 120px;
    z-index: 20;
    display: none; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
}

.joystick-base {
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(5px);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.joystick-thumb {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.1s;
}

.pause-menu {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #16213e;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    z-index: 100;
}

.pause-menu h3 {
    color: white;
    margin-bottom: 20px;
}

.pause-menu button {
    margin: 10px;
    min-width: 150px;
}

/* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
    .joystick-container {
        display: block;
    }
    
    .arena-stats {
        font-size: 0.9rem;
        gap: 10px;
    }
}
```

---

## üìÅ –®–∞–≥ 2. –°–æ–∑–¥–∞—ë–º `js/arena/GameEntity.js`

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–ª–∞—Å—Å—ã —Å—É—â–Ω–æ—Å—Ç–µ–π –Ω–∞ –∞—Ä–µ–Ω–µ. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `arena` –∏ –≤ –Ω–µ–π —ç—Ç–æ—Ç —Ñ–∞–π–ª.

### –®–∞–≥ 2.1. –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å ArenaEntity

```javascript
// ==============================
// –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –Ω–∞ –∞—Ä–µ–Ω–µ
// ==============================
class ArenaEntity {
    /**
     * –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å—É—â–Ω–æ—Å—Ç—å
     * @param {number} x - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X –≤ –º–∏—Ä–µ
     * @param {number} y - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y –≤ –º–∏—Ä–µ
     * @param {number} radius - –†–∞–¥–∏—É—Å —Å—É—â–Ω–æ—Å—Ç–∏
     * @param {string} color - –¶–≤–µ—Ç
     */
    constructor(x, y, radius, color) {
        this.worldX = x; // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –º–∏—Ä–µ
        this.worldY = y;
        this.radius = radius;
        this.color = color;
        this.vx = 0;
        this.vy = 0;
        this.speed = 0;
        this.isActive = true;
    }
    
    /**
     * –ü–æ–ª—É—á–∏—Ç—å —ç–∫—Ä–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å —É—á—ë—Ç–æ–º –∫–∞–º–µ—Ä—ã
     * @param {number} cameraX - –°–º–µ—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –ø–æ X
     * @returns {number} - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
     */
    getScreenX(cameraX) {
        return this.worldX - cameraX;
    }
    
    getScreenY(cameraY) {
        return this.worldY - cameraY;
    }
    
    /**
     * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
     * @param {number} deltaTime - –í—Ä–µ–º—è —Å –ø—Ä–æ—à–ª–æ–≥–æ –∫–∞–¥—Ä–∞
     * @param {number} worldWidth - –®–∏—Ä–∏–Ω–∞ –º–∏—Ä–∞
     * @param {number} worldHeight - –í—ã—Å–æ—Ç–∞ –º–∏—Ä–∞
     */
    update(deltaTime, worldWidth, worldHeight) {
        if (!this.isActive) return;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
        this.worldX += this.vx * this.speed * deltaTime;
        this.worldY += this.vy * this.speed * deltaTime;
        
        // –ì—Ä–∞–Ω–∏—Ü—ã –º–∏—Ä–∞
        this.worldX = Math.max(this.radius, Math.min(worldWidth - this.radius, this.worldX));
        this.worldY = Math.max(this.radius, Math.min(worldHeight - this.radius, this.worldY));
    }
    
    /**
     * –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—É—â–Ω–æ—Å—Ç–∏
     * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–∞–Ω–≤–∞—Å–∞
     * @param {number} cameraX - –°–º–µ—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –ø–æ X
     * @param {number} cameraY - –°–º–µ—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –ø–æ Y
     */
    draw(ctx, cameraX, cameraY) {
        if (!this.isActive) return;
        
        const screenX = this.getScreenX(cameraX);
        const screenY = this.getScreenY(cameraY);
        
        // –†–∏—Å—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∏–¥–Ω–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        if (screenX + this.radius < 0 || screenX - this.radius > ctx.canvas.width ||
            screenY + this.radius < 0 || screenY - this.radius > ctx.canvas.height) {
            return;
        }
        
        ctx.beginPath();
        ctx.arc(screenX, screenY, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 2;
        ctx.stroke();
    }
}
```

### –®–∞–≥ 2.2. –ö–ª–∞—Å—Å ArenaHero (–≥–µ—Ä–æ–π –Ω–∞ –∞—Ä–µ–Ω–µ)

–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ `ArenaEntity`:

```javascript
// ==============================
// –ö–ª–∞—Å—Å –≥–µ—Ä–æ—è –Ω–∞ –∞—Ä–µ–Ω–µ
// ==============================
class ArenaHero extends ArenaEntity {
    /**
     * –°–æ–∑–¥–∞—ë—Ç –≥–µ—Ä–æ—è –Ω–∞ –∞—Ä–µ–Ω–µ
     * @param {number} x - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X
     * @param {number} y - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y
     * @param {Object} heroData - –î–∞–Ω–Ω—ã–µ –≥–µ—Ä–æ—è –∏–∑ GameState
     */
    constructor(x, y, heroData) {
        super(x, y, 20, '#4aff4a');
        this.heroData = heroData;
        this.hp = heroData.currentStats.hp;
        this.maxHp = heroData.baseStats.hp;
        this.attack = heroData.currentStats.attack;
        this.speed = heroData.currentStats.speed * 3;
        
        // –û—Ä—É–∂–∏–µ
        this.weapons = [];
        this.loadWeapons();
        
        // –°–±–æ—Ä –æ–ø—ã—Ç–∞
        this.expMagnet = 150;
        this.level = heroData.level;
        this.exp = heroData.exp;
        
        // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        this.animationFrame = 0;
        this.lastAttackTime = 0;
        
        // –°–ø—Ä–∞–π—Ç –º–µ–Ω–µ–¥–∂–µ—Ä
        this.spriteManager = window.spriteManager;
    }
    
    /**
     * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Ä—É–∂–∏–µ –∏–∑ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –≥–µ—Ä–æ—è
     */
    loadWeapons() {
        if (this.heroData.equipment && this.heroData.equipment.weapon) {
            this.weapons.push(new ArenaWeapon(this, this.heroData.equipment.weapon));
        } else {
            // –û—Ä—É–∂–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            this.weapons.push(new ArenaWeapon(this, {
                name: '–ö—É–ª–∞–∫–∏',
                damage: 5,
                range: 60,
                cooldown: 0.5,
                type: 'melee',
                icon: 'üëä'
            }));
        }
    }
    
    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ä–æ–Ω–∞
     * @param {number} amount - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–Ω–∞
     */
    takeDamage(amount) {
        this.hp -= amount;
        if (this.hp < 0) this.hp = 0;
        
        // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
        this.color = '#ff0000';
        setTimeout(() => this.color = '#4aff4a', 100);
        
        return this.hp <= 0;
    }
    
    update(deltaTime, worldWidth, worldHeight) {
        super.update(deltaTime, worldWidth, worldHeight);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ä—É–∂–∏–µ
        this.weapons.forEach(w => w.update(deltaTime));
        
        // –ê–Ω–∏–º–∞—Ü–∏—è
        this.animationFrame += deltaTime * 10;
    }
    
    draw(ctx, cameraX, cameraY) {
        if (!this.isActive) return;
        
        const screenX = this.getScreenX(cameraX);
        const screenY = this.getScreenY(cameraY);
        
        // –ü–æ–ª—É—á–∞–µ–º —Å–ø—Ä–∞–π—Ç –≥–µ—Ä–æ—è
        const sprite = this.spriteManager.getSprite('hero', 
            this.heroData.equipment && this.heroData.equipment.weapon && 
            this.heroData.equipment.weapon.type === 'ranged' ? 'bow' : 'default'
        );
        
        // –†–∏—Å—É–µ–º —Å–ø—Ä–∞–π—Ç
        ctx.drawImage(sprite, screenX - 20, screenY - 20, 40, 40);
        
        // –ü–æ–ª–æ—Å–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
        const hpPercent = this.hp / this.maxHp;
        ctx.fillStyle = '#ff0000';
        ctx.fillRect(screenX - 20, screenY - 30, 40, 4);
        ctx.fillStyle = '#00ff00';
        ctx.fillRect(screenX - 20, screenY - 30, 40 * hpPercent, 4);
        
        // –ò–º—è –≥–µ—Ä–æ—è
        ctx.font = '12px Arial';
        ctx.fillStyle = '#fff';
        ctx.textAlign = 'center';
        ctx.fillText(this.heroData.name, screenX, screenY - 35);
        
        // –†–∏—Å—É–µ–º –æ—Ä—É–∂–∏–µ
        this.weapons.forEach(w => w.draw(ctx, cameraX, cameraY));
    }
    
    /**
     * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞
     * @param {number} amount - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—ã—Ç–∞
     */
    addExp(amount) {
        this.exp += amount;
        while (this.exp >= 100) {
            this.levelUp();
        }
    }
    
    /**
     * –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –Ω–∞ –∞—Ä–µ–Ω–µ
     */
    levelUp() {
        this.level++;
        this.exp -= 100;
        
        this.maxHp += 10;
        this.hp = this.maxHp;
        this.attack += 2;
        
        this.heroData.level = this.level;
        this.heroData.exp = this.exp;
        this.heroData.baseStats.hp = this.maxHp;
        this.heroData.baseStats.attack = this.attack;
    }
}
```

### –®–∞–≥ 2.3. –ö–ª–∞—Å—Å ArenaEnemy (–≤—Ä–∞–≥)

–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ `ArenaHero`:

```javascript
// ==============================
// –ö–ª–∞—Å—Å –≤—Ä–∞–≥–∞ –Ω–∞ –∞—Ä–µ–Ω–µ
// ==============================
class ArenaEnemy extends ArenaEntity {
    /**
     * –°–æ–∑–¥–∞—ë—Ç –≤—Ä–∞–≥–∞
     * @param {number} x - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X
     * @param {number} y - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y
     * @param {number} difficulty - –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
     */
    constructor(x, y, difficulty = 1) {
        super(x, y, 18, '#ff4a4a');
        
        this.difficulty = difficulty;
        this.hp = 20 + 10 * difficulty;
        this.maxHp = this.hp;
        this.attack = 3 + 2 * difficulty;
        this.speed = 10 + 2 * difficulty;
        this.expValue = 5 + 5 * difficulty;
        
        // –¢–∏–ø –≤—Ä–∞–≥–∞
        const enemyTypes = [
            { name: '–ì–æ–±–ª–∏–Ω', sprite: 'goblin', color: '#0f8a0f', attackSpeed: 1.0 },
            { name: '–°–∫–µ–ª–µ—Ç', sprite: 'skeleton', color: '#aaa', attackSpeed: 0.8 },
            { name: '–ü—Ä–∏–∑—Ä–∞–∫', sprite: 'ghost', color: '#aa4aff', attackSpeed: 0.6 },
            { name: '–û—Ä–∫', sprite: 'goblin', color: '#8B4513', attackSpeed: 1.2 }
        ];
        
        this.type = enemyTypes[Math.floor(Math.random() * enemyTypes.length)];
        this.color = this.type.color;
        this.spriteKey = this.type.sprite;
        this.name = this.type.name;
        
        this.damageCooldown = 0;
        this.damageInterval = 1.0 / this.type.attackSpeed;
        
        this.spriteManager = window.spriteManager;
    }
    
    update(deltaTime, hero, worldWidth, worldHeight) {
        super.update(deltaTime, worldWidth, worldHeight);
        
        if (hero && hero.isActive) {
            const dx = hero.worldX - this.worldX;
            const dy = hero.worldY - this.worldY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance > 0) {
                this.vx = dx / distance;
                this.vy = dy / distance;
            }
            
            // –ê—Ç–∞–∫–∞ –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏
            if (distance < this.radius + hero.radius) {
                this.damageCooldown -= deltaTime;
                if (this.damageCooldown <= 0) {
                    hero.takeDamage(this.attack);
                    this.damageCooldown = this.damageInterval;
                }
            }
        }
    }
    
    takeDamage(amount) {
        this.hp -= amount;
        this.color = '#ffffff';
        setTimeout(() => this.color = this.type.color, 100);
        return this.hp <= 0;
    }
    
    draw(ctx, cameraX, cameraY) {
        if (!this.isActive) return;
        
        const screenX = this.getScreenX(cameraX);
        const screenY = this.getScreenY(cameraY);
        
        // –ü–æ–ª—É—á–∞–µ–º —Å–ø—Ä–∞–π—Ç –≤—Ä–∞–≥–∞
        const sprite = this.spriteManager.getSprite(this.spriteKey);
        
        // –†–∏—Å—É–µ–º —Å–ø—Ä–∞–π—Ç
        ctx.drawImage(sprite, screenX - 20, screenY - 20, 40, 40);
        
        // –ü–æ–ª–æ—Å–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
        const hpPercent = this.hp / this.maxHp;
        ctx.fillStyle = '#ff0000';
        ctx.fillRect(screenX - 20, screenY - 30, 40, 4);
        ctx.fillStyle = '#00ff00';
        ctx.fillRect(screenX - 20, screenY - 30, 40 * hpPercent, 4);
    }
}
```

### –®–∞–≥ 2.4. –ö–ª–∞—Å—Å—ã –æ—Ä—É–∂–∏—è –∏ —Å–Ω–∞—Ä—è–¥–æ–≤

–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ `ArenaEnemy`:

```javascript
// ==============================
// –ö–ª–∞—Å—Å –æ—Ä—É–∂–∏—è –Ω–∞ –∞—Ä–µ–Ω–µ
// ==============================
class ArenaWeapon {
    constructor(owner, weaponData) {
        this.owner = owner;
        this.data = weaponData;
        this.cooldown = 0;
        this.projectiles = [];
    }
    
    update(deltaTime) {
        if (this.cooldown > 0) {
            this.cooldown -= deltaTime;
        }
        
        if (this.cooldown <= 0) {
            this.attack();
            this.cooldown = this.data.cooldown || 1.0;
        }
        
        this.projectiles = this.projectiles.filter(p => p.isActive);
        this.projectiles.forEach(p => p.update(deltaTime));
    }
    
    attack() {
        if (this.data.type === 'melee' || !this.data.type) {
            this.projectiles.push(new MeleeProjectile(this.owner, this.data));
        } else {
            const arena = window.currentArena;
            if (arena && arena.enemies.length > 0) {
                const target = arena.enemies[Math.floor(Math.random() * arena.enemies.length)];
                if (target && target.isActive) {
                    this.projectiles.push(new RangedProjectile(this.owner, this.data, target));
                }
            }
        }
    }
    
    draw(ctx, cameraX, cameraY) {
        this.projectiles.forEach(p => p.draw(ctx, cameraX, cameraY));
        
        // –†–∏—Å—É–µ–º –∫—É–ª–¥–∞—É–Ω
        if (this.cooldown > 0) {
            const screenX = this.owner.getScreenX(cameraX);
            const screenY = this.owner.getScreenY(cameraY);
            
            ctx.beginPath();
            ctx.arc(screenX, screenY, 30, 0, Math.PI * 2 * (1 - this.cooldown / (this.data.cooldown || 1.0)));
            ctx.strokeStyle = '#ffff00';
            ctx.lineWidth = 3;
            ctx.stroke();
        }
    }
}

// ==============================
// –ö–ª–∞—Å—Å —Å–Ω–∞—Ä—è–¥–∞ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è
// ==============================
class RangedProjectile {
    constructor(owner, data, target) {
        this.owner = owner;
        this.worldX = owner.worldX;
        this.worldY = owner.worldY;
        this.data = data;
        this.target = target;
        this.speed = 300;
        this.radius = 6;
        this.isActive = true;
        this.damage = data.damage || 5;
    }
    
    update(deltaTime) {
        if (!this.target || !this.target.isActive) {
            this.isActive = false;
            return;
        }
        
        const dx = this.target.worldX - this.worldX;
        const dy = this.target.worldY - this.worldY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < 10) {
            this.target.takeDamage(this.damage);
            this.isActive = false;
        } else {
            this.worldX += (dx / distance) * this.speed * deltaTime;
            this.worldY += (dy / distance) * this.speed * deltaTime;
        }
    }
    
    draw(ctx, cameraX, cameraY) {
        const screenX = this.worldX - cameraX;
        const screenY = this.worldY - cameraY;
        
        ctx.beginPath();
        ctx.arc(screenX, screenY, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = '#ffaa00';
        ctx.fill();
        ctx.shadowColor = '#ff0';
        ctx.shadowBlur = 10;
        ctx.fill();
        ctx.shadowBlur = 0;
    }
}

// ==============================
// –ö–ª–∞—Å—Å —Å–Ω–∞—Ä—è–¥–∞ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è
// ==============================
class MeleeProjectile {
    constructor(owner, data) {
        this.owner = owner;
        this.data = data;
        this.lifetime = 0.2;
        this.isActive = true;
        this.hitEnemies = new Set();
    }
    
    update(deltaTime) {
        this.lifetime -= deltaTime;
        if (this.lifetime <= 0) {
            this.isActive = false;
        }
    }
    
    draw(ctx, cameraX, cameraY) {
        const screenX = this.owner.getScreenX(cameraX);
        const screenY = this.owner.getScreenY(cameraY);
        
        ctx.beginPath();
        ctx.arc(screenX, screenY, this.data.range || 60, 0, Math.PI * 2);
        ctx.strokeStyle = '#ffff00';
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 5]);
        ctx.stroke();
        ctx.setLineDash([]);
    }
}
```

### –®–∞–≥ 2.5. –ö–ª–∞—Å—Å ExpGem (–∫—Ä–∏—Å—Ç–∞–ª–ª –æ–ø—ã—Ç–∞)

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞:

```javascript
// ==============================
// –ö–ª–∞—Å—Å –∫—Ä–∏—Å—Ç–∞–ª–ª–∞ –æ–ø—ã—Ç–∞
// ==============================
class ExpGem extends ArenaEntity {
    constructor(x, y, value) {
        super(x, y, 10, '#ffd700');
        this.value = value;
        this.spriteManager = window.spriteManager;
        this.floatOffset = 0;
        this.floatDir = 1;
    }
    
    update(deltaTime, worldWidth, worldHeight) {
        super.update(deltaTime, worldWidth, worldHeight);
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞—Ä–µ–Ω–∏—è
        this.floatOffset += deltaTime * 2 * this.floatDir;
        if (Math.abs(this.floatOffset) > 5) {
            this.floatDir *= -1;
        }
    }
    
    draw(ctx, cameraX, cameraY) {
        if (!this.isActive) return;
        
        const screenX = this.getScreenX(cameraX);
        const screenY = this.getScreenY(cameraY) + this.floatOffset;
        
        const sprite = this.spriteManager.getSprite('expGem');
        ctx.drawImage(sprite, screenX - 10, screenY - 10, 20, 20);
    }
}

// –î–µ–ª–∞–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
window.ArenaEntity = ArenaEntity;
window.ArenaHero = ArenaHero;
window.ArenaEnemy = ArenaEnemy;
window.ArenaWeapon = ArenaWeapon;
window.ExpGem = ExpGem;
```

---

## üìÅ –®–∞–≥ 3. –°–æ–∑–¥–∞—ë–º `js/arena/SpriteManager.js`

–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–π—Ç–æ–≤.

```javascript
// ==============================
// –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–ø—Ä–∞–π—Ç–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
// ==============================
class SpriteManager {
    constructor() {
        this.sprites = {};
        this.loaded = false;
        this.loadSprites();
    }
    
    loadSprites() {
        // –°–æ–∑–¥–∞—ë–º —Å–ø—Ä–∞–π—Ç—ã —á–µ—Ä–µ–∑ canvas –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
        this.createHeroSprites();
        this.createEnemySprites();
        this.createEffectSprites();
        this.loaded = true;
        console.log('–°–ø—Ä–∞–π—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
    }
    
    createHeroSprites() {
        // –°–æ–∑–¥–∞—ë–º —Å–ø—Ä–∞–π—Ç –≥–µ—Ä–æ—è (–º–µ—á)
        const canvas = document.createElement('canvas');
        canvas.width = 40;
        canvas.height = 40;
        const ctx = canvas.getContext('2d');
        
        // –¢–µ–ª–æ –≥–µ—Ä–æ—è
        ctx.fillStyle = '#4aff4a';
        ctx.beginPath();
        ctx.arc(20, 20, 18, 0, Math.PI * 2);
        ctx.fill();
        
        // –ì–ª–∞–∑–∞
        ctx.fillStyle = '#fff';
        ctx.beginPath();
        ctx.arc(14, 15, 4, 0, Math.PI * 2);
        ctx.arc(26, 15, 4, 0, Math.PI * 2);
        ctx.fill();
        
        // –ó—Ä–∞—á–∫–∏
        ctx.fillStyle = '#000';
        ctx.beginPath();
        ctx.arc(14, 15, 2, 0, Math.PI * 2);
        ctx.arc(26, 15, 2, 0, Math.PI * 2);
        ctx.fill();
        
        // –ú–µ—á
        ctx.fillStyle = '#aaa';
        ctx.fillRect(32, 10, 15, 5);
        ctx.fillRect(44, 5, 5, 15);
        
        this.sprites.hero = canvas;
        
        // –ì–µ—Ä–æ–π —Å –ª—É–∫–æ–º
        const canvasBow = document.createElement('canvas');
        canvasBow.width = 40;
        canvasBow.height = 40;
        const ctxBow = canvasBow.getContext('2d');
        
        // –¢–µ–ª–æ
        ctxBow.fillStyle = '#4aff4a';
        ctxBow.beginPath();
        ctxBow.arc(20, 20, 18, 0, Math.PI * 2);
        ctxBow.fill();
        
        // –ì–ª–∞–∑–∞
        ctxBow.fillStyle = '#fff';
        ctxBow.beginPath();
        ctxBow.arc(14, 15, 4, 0, Math.PI * 2);
        ctxBow.arc(26, 15, 4, 0, Math.PI * 2);
        ctxBow.fill();
        ctxBow.fillStyle = '#000';
        ctxBow.beginPath();
        ctxBow.arc(14, 15, 2, 0, Math.PI * 2);
        ctxBow.arc(26, 15, 2, 0, Math.PI * 2);
        ctxBow.fill();
        
        // –õ—É–∫
        ctxBow.strokeStyle = '#8B4513';
        ctxBow.lineWidth = 3;
        ctxBow.beginPath();
        ctxBow.arc(30, 15, 10, 0, Math.PI);
        ctxBow.stroke();
        
        this.sprites.heroBow = canvasBow;
    }
    
    createEnemySprites() {
        // –ì–æ–±–ª–∏–Ω
        const canvasGoblin = document.createElement('canvas');
        canvasGoblin.width = 40;
        canvasGoblin.height = 40;
        const ctxGoblin = canvasGoblin.getContext('2d');
        
        ctxGoblin.fillStyle = '#0f8a0f';
        ctxGoblin.beginPath();
        ctxGoblin.arc(20, 20, 15, 0, Math.PI * 2);
        ctxGoblin.fill();
        
        // –£—à–∏
        ctxGoblin.fillStyle = '#0f8a0f';
        ctxGoblin.beginPath();
        ctxGoblin.arc(10, 10, 8, 0, Math.PI * 2);
        ctxGoblin.arc(30, 10, 8, 0, Math.PI * 2);
        ctxGoblin.fill();
        
        // –ì–ª–∞–∑–∞
        ctxGoblin.fillStyle = '#ff0';
        ctxGoblin.beginPath();
        ctxGoblin.arc(15, 18, 3, 0, Math.PI * 2);
        ctxGoblin.arc(25, 18, 3, 0, Math.PI * 2);
        ctxGoblin.fill();
        ctxGoblin.fillStyle = '#000';
        ctxGoblin.beginPath();
        ctxGoblin.arc(15, 18, 1, 0, Math.PI * 2);
        ctxGoblin.arc(25, 18, 1, 0, Math.PI * 2);
        ctxGoblin.fill();
        
        this.sprites.goblin = canvasGoblin;
        
        // –°–∫–µ–ª–µ—Ç
        const canvasSkeleton = document.createElement('canvas');
        canvasSkeleton.width = 40;
        canvasSkeleton.height = 40;
        const ctxSkeleton = canvasSkeleton.getContext('2d');
        
        ctxSkeleton.fillStyle = '#ddd';
        ctxSkeleton.beginPath();
        ctxSkeleton.arc(20, 20, 15, 0, Math.PI * 2);
        ctxSkeleton.fill();
        
        // –ì–ª–∞–∑–Ω–∏—Ü—ã
        ctxSkeleton.fillStyle = '#000';
        ctxSkeleton.beginPath();
        ctxSkeleton.arc(15, 15, 3, 0, Math.PI * 2);
        ctxSkeleton.arc(25, 15, 3, 0, Math.PI * 2);
        ctxSkeleton.fill();
        
        this.sprites.skeleton = canvasSkeleton;
        
        // –ü—Ä–∏–∑—Ä–∞–∫
        const canvasGhost = document.createElement('canvas');
        canvasGhost.width = 40;
        canvasGhost.height = 40;
        const ctxGhost = canvasGhost.getContext('2d');
        
        ctxGhost.fillStyle = '#aa4aff';
        ctxGhost.globalAlpha = 0.7;
        ctxGhost.beginPath();
        ctxGhost.arc(20, 20, 15, 0, Math.PI * 2);
        ctxGhost.fill();
        
        ctxGhost.globalAlpha = 1;
        ctxGhost.fillStyle = '#fff';
        ctxGhost.beginPath();
        ctxGhost.arc(15, 15, 3, 0, Math.PI * 2);
        ctxGhost.arc(25, 15, 3, 0, Math.PI * 2);
        ctxGhost.fill();
        
        this.sprites.ghost = canvasGhost;
    }
    
    createEffectSprites() {
        // –ö—Ä–∏—Å—Ç–∞–ª–ª –æ–ø—ã—Ç–∞
        const canvasExp = document.createElement('canvas');
        canvasExp.width = 20;
        canvasExp.height = 20;
        const ctxExp = canvasExp.getContext('2d');
        
        ctxExp.fillStyle = '#ffd700';
        ctxExp.beginPath();
        ctxExp.moveTo(10, 2);
        ctxExp.lineTo(18, 10);
        ctxExp.lineTo(10, 18);
        ctxExp.lineTo(2, 10);
        ctxExp.closePath();
        ctxExp.fill();
        
        // –ë–ª–∏–∫
        ctxExp.fillStyle = '#fff';
        ctxExp.beginPath();
        ctxExp.arc(8, 8, 2, 0, Math.PI * 2);
        ctxExp.fill();
        
        this.sprites.expGem = canvasExp;
    }
    
    getSprite(type, variant = 'default') {
        if (type === 'hero') {
            return variant === 'bow' ? this.sprites.heroBow : this.sprites.hero;
        }
        return this.sprites[type] || this.sprites.goblin;
    }
}

// –î–µ–ª–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–º
window.SpriteManager = SpriteManager;
```

---

## üìÅ –®–∞–≥ 4. –°–æ–∑–¥–∞—ë–º `js/arena/SurvivorsArena.js`

–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∞—Ä–µ–Ω—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏–≥—Ä–æ–≤—ã–º —Ü–∏–∫–ª–æ–º.

### –®–∞–≥ 4.1. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è

```javascript
// ==============================
// –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∞—Ä–µ–Ω—ã –≤ —Å—Ç–∏–ª–µ Survivors
// ==============================
class SurvivorsArena {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        
        // –†–∞–∑–º–µ—Ä—ã –∫–∞–Ω–≤–∞—Å–∞ (—ç–∫—Ä–∞–Ω–∞)
        this.screenWidth = 800;
        this.screenHeight = 600;
        this.canvas.width = this.screenWidth;
        this.canvas.height = this.screenHeight;
        
        // –†–∞–∑–º–µ—Ä—ã –º–∏—Ä–∞ (–≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ —ç–∫—Ä–∞–Ω–∞)
        this.worldWidth = 2400;
        this.worldHeight = 1800;
        
        // –ö–∞–º–µ—Ä–∞ (—Å–ª–µ–¥–∏—Ç –∑–∞ –≥–µ—Ä–æ–µ–º)
        this.cameraX = 0;
        this.cameraY = 0;
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        this.isRunning = false;
        this.isPaused = false;
        this.gameTime = 0;
        this.difficulty = 1;
        
        // –°—É—â–Ω–æ—Å—Ç–∏
        this.hero = null;
        this.enemies = [];
        this.expGems = [];
        
        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø–∞–≤–Ω–∞
        this.spawnTimer = 0;
        this.spawnInterval = 1.5;
        this.maxEnemies = 30;
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        this.keys = {};
        this.joystick = { active: false, dirX: 0, dirY: 0 };
        
        // –î–µ–∫–æ—Ä–∞—Ü–∏–∏ (–∫–∞–º–Ω–∏, –¥–µ—Ä–µ–≤—å—è)
        this.decorations = [];
        this.generateDecorations();
        
        // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–∞–¥—Ä–∞
        this.lastTimestamp = 0;
        
        // –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        window.currentArena = this;
        
        this.initControls();
    }
    
    generateDecorations() {
        // –°–æ–∑–¥–∞—ë–º –¥–µ–∫–æ—Ä–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
        for (let i = 0; i < 50; i++) {
            this.decorations.push({
                x: Math.random() * this.worldWidth,
                y: Math.random() * this.worldHeight,
                type: Math.floor(Math.random() * 3), // 0-–¥–µ—Ä–µ–≤–æ, 1-–∫–∞–º–µ–Ω—å, 2-–∫—É—Å—Ç
                size: 20 + Math.random() * 30
            });
        }
    }
```

### –®–∞–≥ 4.2. –ú–µ—Ç–æ–¥—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:

```javascript
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã (—Å–ª–µ–¥–∏—Ç –∑–∞ –≥–µ—Ä–æ–µ–º)
    updateCamera() {
        if (!this.hero) return;
        
        // –ö–∞–º–µ—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –≥–µ—Ä–æ–µ–º, –Ω–æ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–∏—Ä–∞
        this.cameraX = this.hero.worldX - this.screenWidth / 2;
        this.cameraY = this.hero.worldY - this.screenHeight / 2;
        
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–∞–º–µ—Ä—É –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –º–∏—Ä–∞
        this.cameraX = Math.max(0, Math.min(this.worldWidth - this.screenWidth, this.cameraX));
        this.cameraY = Math.max(0, Math.min(this.worldHeight - this.screenHeight, this.cameraY));
    }
    
    init(heroData) {
        console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä–µ–Ω—ã —Å –≥–µ—Ä–æ–µ–º:', heroData);
        
        // –†–∞–∑–º–µ—â–∞–µ–º –≥–µ—Ä–æ—è –≤ —Ü–µ–Ω—Ç—Ä–µ –º–∏—Ä–∞
        this.hero = new ArenaHero(this.worldWidth / 2, this.worldHeight / 2, heroData);
        this.enemies = [];
        this.expGems = [];
        this.gameTime = 0;
        this.difficulty = 1;
        this.spawnTimer = 0;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–º–µ—Ä—É
        this.updateCamera();
        
        // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤
        for (let i = 0; i < 5; i++) {
            this.spawnEnemy();
        }
        
        console.log('–ê—Ä–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞, –≤—Ä–∞–≥–æ–≤:', this.enemies.length);
    }
    
    start() {
        this.isRunning = true;
        this.isPaused = false;
        this.lastTimestamp = performance.now();
        requestAnimationFrame((timestamp) => this.gameLoop(timestamp));
    }
    
    pause() {
        this.isPaused = true;
    }
    
    resume() {
        this.isPaused = false;
        this.lastTimestamp = performance.now();
        requestAnimationFrame((timestamp) => this.gameLoop(timestamp));
    }
    
    stop() {
        this.isRunning = false;
        window.currentArena = null;
    }
```

### –®–∞–≥ 4.3. –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥—ã –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞:

```javascript
    gameLoop(timestamp) {
        if (!this.isRunning) return;
        
        const deltaTime = Math.min((timestamp - this.lastTimestamp) / 1000, 0.1);
        this.lastTimestamp = timestamp;
        
        if (!this.isPaused && this.hero) {
            this.update(deltaTime);
        }
        
        this.draw();
        
        requestAnimationFrame((ts) => this.gameLoop(ts));
    }
    
    update(deltaTime) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è
        this.gameTime += deltaTime;
        this.difficulty = 1 + Math.floor(this.gameTime / 60) * 0.5;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º UI
        this.updateUI();
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ—Ä–æ–µ–º
        this.handleHeroMovement(deltaTime);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –≥–µ—Ä–æ—è
        this.hero.update(deltaTime, this.worldWidth, this.worldHeight);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–º–µ—Ä—É
        this.updateCamera();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–º–µ—Ä—Ç—å –≥–µ—Ä–æ—è
        if (this.hero.hp <= 0) {
            this.gameOver();
            return;
        }
        
        // –°–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤
        this.spawnTimer -= deltaTime;
        if (this.spawnTimer <= 0 && this.enemies.length < this.maxEnemies) {
            this.spawnEnemy();
            this.spawnTimer = this.spawnInterval / this.difficulty;
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–∞–≥–æ–≤
        this.enemies = this.enemies.filter(enemy => {
            enemy.update(deltaTime, this.hero, this.worldWidth, this.worldHeight);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ø–∞–¥–∞–Ω–∏—è –æ—Ç –æ—Ä—É–∂–∏—è
            this.hero.weapons.forEach(weapon => {
                weapon.projectiles.forEach(projectile => {
                    if (projectile instanceof MeleeProjectile && !projectile.hitEnemies.has(enemy)) {
                        if (this.checkMeleeHit(this.hero, enemy, projectile.data.range || 60)) {
                            enemy.takeDamage(projectile.data.damage || 5);
                            projectile.hitEnemies.add(enemy);
                            
                            if (enemy.hp <= 0) {
                                this.spawnExpGem(enemy.worldX, enemy.worldY, enemy.expValue);
                            }
                        }
                    }
                });
            });
            
            return enemy.hp > 0;
        });
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫—Ä–∏—Å—Ç–∞–ª–ª—ã –æ–ø—ã—Ç–∞
        this.expGems = this.expGems.filter(gem => {
            gem.update(deltaTime, this.worldWidth, this.worldHeight);
            
            const distance = Math.hypot(gem.worldX - this.hero.worldX, gem.worldY - this.hero.worldY);
            if (distance < this.hero.radius + gem.radius + this.hero.expMagnet) {
                this.hero.addExp(gem.value);
                return false;
            }
            return true;
        });
    }
```

### –®–∞–≥ 4.4. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

–î–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```javascript
    handleHeroMovement(deltaTime) {
        let moveX = 0, moveY = 0;
        
        if (this.keys['ArrowUp'] || this.keys['w'] || this.keys['W']) moveY -= 1;
        if (this.keys['ArrowDown'] || this.keys['s'] || this.keys['S']) moveY += 1;
        if (this.keys['ArrowLeft'] || this.keys['a'] || this.keys['A']) moveX -= 1;
        if (this.keys['ArrowRight'] || this.keys['d'] || this.keys['D']) moveX += 1;
        
        if (this.joystick.active) {
            moveX = this.joystick.dirX;
            moveY = this.joystick.dirY;
        }
        
        if (moveX !== 0 || moveY !== 0) {
            const length = Math.sqrt(moveX * moveX + moveY * moveY);
            this.hero.vx = moveX / length;
            this.hero.vy = moveY / length;
        } else {
            this.hero.vx = 0;
            this.hero.vy = 0;
        }
    }
    
    checkMeleeHit(hero, enemy, range) {
        const distance = Math.hypot(hero.worldX - enemy.worldX, hero.worldY - enemy.worldY);
        return distance < hero.radius + enemy.radius + range;
    }
    
    spawnEnemy() {
        // –°–ø–∞–≤–Ω–∏–º –≤—Ä–∞–≥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–∞–º–µ—Ä—ã
        let x, y;
        const viewMargin = 200;
        
        do {
            x = Math.random() * this.worldWidth;
            y = Math.random() * this.worldHeight;
        } while (
            x > this.cameraX - viewMargin && 
            x < this.cameraX + this.screenWidth + viewMargin &&
            y > this.cameraY - viewMargin && 
            y < this.cameraY + this.screenHeight + viewMargin
        );
        
        const enemy = new ArenaEnemy(x, y, this.difficulty);
        this.enemies.push(enemy);
    }
    
    spawnExpGem(x, y, value) {
        this.expGems.push(new ExpGem(x, y, value));
    }
    
    updateUI() {
        document.getElementById('arenaHp').textContent = Math.floor(this.hero.hp);
        document.getElementById('arenaMaxHp').textContent = this.hero.maxHp;
        document.getElementById('arenaAttack').textContent = this.hero.attack;
        document.getElementById('arenaLevel').textContent = this.hero.level;
        
        const minutes = Math.floor(this.gameTime / 60);
        const seconds = Math.floor(this.gameTime % 60);
        document.getElementById('arenaTimer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }
```

### –®–∞–≥ 4.5. –ú–µ—Ç–æ–¥—ã –æ—Ç—Ä–∏—Å–æ–≤–∫–∏

–î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è:

```javascript
    draw() {
        // –û—á–∏—â–∞–µ–º –∫–∞–Ω–≤–∞—Å
        this.ctx.clearRect(0, 0, this.screenWidth, this.screenHeight);
        
        // –†–∏—Å—É–µ–º —Ñ–æ–Ω
        this.drawBackground();
        this.drawDecorations();
        this.drawGrid();
        
        // –†–∏—Å—É–µ–º —Å—É—â–Ω–æ—Å—Ç–∏
        this.expGems.forEach(gem => gem.draw(this.ctx, this.cameraX, this.cameraY));
        this.enemies.forEach(enemy => enemy.draw(this.ctx, this.cameraX, this.cameraY));
        
        if (this.hero) {
            this.hero.draw(this.ctx, this.cameraX, this.cameraY);
        }
        
        // –†–∏—Å—É–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        this.ctx.fillStyle = '#fff';
        this.ctx.font = '16px Arial';
        this.ctx.fillText(`–°–ª–æ–∂–Ω–æ—Å—Ç—å: ${this.difficulty.toFixed(1)}x`, 10, 30);
        this.ctx.fillText(`–í—Ä–∞–≥–æ–≤: ${this.enemies.length}`, 10, 50);
    }
    
    drawBackground() {
        const gradient = this.ctx.createLinearGradient(0, 0, 0, this.screenHeight);
        gradient.addColorStop(0, '#1a4a1a');
        gradient.addColorStop(1, '#2a5a2a');
        this.ctx.fillStyle = gradient;
        this.ctx.fillRect(0, 0, this.screenWidth, this.screenHeight);
    }
    
    drawDecorations() {
        this.decorations.forEach(dec => {
            const screenX = dec.x - this.cameraX;
            const screenY = dec.y - this.cameraY;
            
            if (screenX + dec.size < 0 || screenX - dec.size > this.screenWidth ||
                screenY + dec.size < 0 || screenY - dec.size > this.screenHeight) {
                return;
            }
            
            if (dec.type === 0) { // –î–µ—Ä–µ–≤–æ
                this.ctx.fillStyle = '#8B4513';
                this.ctx.fillRect(screenX - 5, screenY - dec.size/2, 10, dec.size);
                this.ctx.fillStyle = '#0a8a0a';
                this.ctx.beginPath();
                this.ctx.arc(screenX, screenY - dec.size/2 - 10, dec.size/2, 0, Math.PI * 2);
                this.ctx.fill();
            } else if (dec.type === 1) { // –ö–∞–º–µ–Ω—å
                this.ctx.fillStyle = '#888';
                this.ctx.beginPath();
                this.ctx.ellipse(screenX, screenY, dec.size/2, dec.size/3, 0, 0, Math.PI * 2);
                this.ctx.fill();
            } else { // –ö—É—Å—Ç
                this.ctx.fillStyle = '#2a8a2a';
                this.ctx.beginPath();
                this.ctx.arc(screenX, screenY, dec.size/2, 0, Math.PI * 2);
                this.ctx.fill();
            }
        });
    }
    
    drawGrid() {
        const cellSize = 80;
        const startX = Math.floor(this.cameraX / cellSize) * cellSize;
        const startY = Math.floor(this.cameraY / cellSize) * cellSize;
        
        this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
        this.ctx.lineWidth = 1;
        
        for (let x = startX; x < this.cameraX + this.screenWidth; x += cellSize) {
            const screenX = x - this.cameraX;
            this.ctx.beginPath();
            this.ctx.moveTo(screenX, 0);
            this.ctx.lineTo(screenX, this.screenHeight);
            this.ctx.stroke();
        }
        
        for (let y = startY; y < this.cameraY + this.screenHeight; y += cellSize) {
            const screenY = y - this.cameraY;
            this.ctx.beginPath();
            this.ctx.moveTo(0, screenY);
            this.ctx.lineTo(this.screenWidth, screenY);
            this.ctx.stroke();
        }
    }
```

### –®–∞–≥ 4.6. –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞:

```javascript
    togglePause() {
        if (this.isPaused) {
            this.resume();
            document.getElementById('pauseMenu').style.display = 'none';
        } else {
            this.pause();
            document.getElementById('pauseMenu').style.display = 'block';
        }
    }
    
    gameOver() {
        this.isRunning = false;
        alert('üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å ' + Math.floor(this.gameTime) + ' —Å–µ–∫—É–Ω–¥');
        this.exitArena();
    }
    
    exitArena() {
        this.stop();
        
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('screenLobby').classList.add('active');
        document.querySelector('.game-nav').style.display = 'flex';
        
        if (this.hero && this.hero.heroData) {
            this.hero.heroData.currentStats.hp = this.hero.hp;
            this.hero.heroData.level = this.hero.level;
            this.hero.heroData.exp = this.hero.exp;
            window.GameState.notify();
        }
        
        window.currentArena = null;
    }
    
    initControls() {
        window.addEventListener('keydown', (e) => {
            if (e.key.startsWith('Arrow') || ['w', 'a', 's', 'd', 'W', 'A', 'S', 'D'].includes(e.key)) {
                e.preventDefault();
                this.keys[e.key] = true;
            }
            
            if (e.key === 'Escape' && this.isRunning) {
                this.togglePause();
            }
        });
        
        window.addEventListener('keyup', (e) => {
            if (e.key.startsWith('Arrow') || ['w', 'a', 's', 'd', 'W', 'A', 'S', 'D'].includes(e.key)) {
                e.preventDefault();
                this.keys[e.key] = false;
            }
        });
        
        const joystickBase = document.querySelector('.joystick-base');
        const joystickThumb = document.getElementById('joystickThumb');
        
        if (joystickBase && joystickThumb) {
            let joystickActive = false;
            
            joystickBase.addEventListener('touchstart', (e) => {
                e.preventDefault();
                joystickActive = true;
                this.joystick.active = true;
            });
            
            joystickBase.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (!joystickActive) return;
                
                const touch = e.touches[0];
                const rect = joystickBase.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                let dx = touch.clientX - centerX;
                let dy = touch.clientY - centerY;
                
                const maxRadius = rect.width / 2;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > maxRadius) {
                    dx = (dx / distance) * maxRadius;
                    dy = (dy / distance) * maxRadius;
                }
                
                joystickThumb.style.transform = `translate(${dx}px, ${dy}px)`;
                
                this.joystick.dirX = dx / maxRadius;
                this.joystick.dirY = dy / maxRadius;
            });
            
            joystickBase.addEventListener('touchend', (e) => {
                e.preventDefault();
                joystickActive = false;
                this.joystick.active = false;
                joystickThumb.style.transform = 'translate(0, 0)';
            });
        }
    }
}

// –î–µ–ª–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–º
window.SurvivorsArena = SurvivorsArena;
```

---

## üìÅ –®–∞–≥ 5. –°–æ–∑–¥–∞—ë–º `js/arena/ArenaController.js`

–≠—Ç–æ—Ç –∫–ª–∞—Å—Å —Å–≤—è–∑—ã–≤–∞–µ—Ç –∞—Ä–µ–Ω—É —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–π.

```javascript
// ==============================
// –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞—Ä–µ–Ω—ã (—Å–≤—è–∑—ã–≤–∞–µ—Ç —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–π)
// ==============================
class ArenaController {
    constructor() {
        // –°–æ–∑–¥–∞—ë–º –º–µ–Ω–µ–¥–∂–µ—Ä —Å–ø—Ä–∞–π—Ç–æ–≤
        window.spriteManager = new SpriteManager();
        this.arena = null;
        this.initEventListeners();
    }
    
    initEventListeners() {
        document.getElementById('pauseBtn').addEventListener('click', () => {
            if (this.arena) {
                this.arena.togglePause();
            }
        });
        
        document.getElementById('resumeBtn').addEventListener('click', () => {
            if (this.arena) {
                this.arena.togglePause();
            }
        });
        
        document.getElementById('exitArenaBtn').addEventListener('click', () => {
            if (this.arena) {
                this.arena.exitArena();
            }
        });
    }
    
    /**
     * –ù–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ª–∞–∑–∫—É –Ω–∞ –∞—Ä–µ–Ω—É
     * @param {string} location - –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
     * @param {Object} hero - –ì–µ—Ä–æ–π
     * @returns {boolean} - –£—Å–ø–µ—à–Ω–æ –ª–∏ –Ω–∞—á–∞–ª–∞—Å—å –≤—ã–ª–∞–∑–∫–∞
     */
    startExpedition(location, hero) {
        if (!hero) {
            alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–µ—Ä–æ—è –≤ –º–µ–Ω—é "–ì–µ—Ä–æ–∏"!');
            return false;
        }
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–µ—Ä–æ—è
        hero.currentStats.hp = hero.baseStats.hp;
        
        // –°–æ–∑–¥–∞—ë–º –∞—Ä–µ–Ω—É
        this.arena = new SurvivorsArena('gameCanvas');
        this.arena.init(hero);
        
        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('screenArena').classList.add('active');
        
        // –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
        document.querySelector('.game-nav').style.display = 'none';
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Ä–µ–Ω—É
        this.arena.start();
        
        return true;
    }
}

window.ArenaController = ArenaController;
```

---

## üìù –®–∞–≥ 6. –û–±–Ω–æ–≤–ª—è–µ–º `index.html`

–í —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞, –≤ –±–ª–æ–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∞—Ä–µ–Ω—ã:

```html
<!-- Core –∫–ª–∞—Å—Å—ã -->
<script src="js/core/GameState.js"></script>
<script src="js/core/Item.js"></script>
<script src="js/core/Hero.js"></script> 
<script src="js/core/Shop.js"></script>
<script src="js/core/Recipe.js"></script>

<!-- –ö–ª–∞—Å—Å—ã –∞—Ä–µ–Ω—ã (–ù–û–í–´–ï) -->
<script src="js/arena/GameEntity.js"></script>
<script src="js/arena/SpriteManager.js"></script> 
<script src="js/arena/SurvivorsArena.js"></script> 
<script src="js/arena/ArenaController.js"></script>

<!-- UI -->
<script src="js/ui/UIManager.js"></script>
<script src="js/game.js"></script>
```

–ò –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞, –ø–æ—Å–ª–µ `style.css`, –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –∞—Ä–µ–Ω—ã:

```html
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="arena_style.css"> <!-- –ù–û–í–û–ï -->
```

---

## üöÄ –®–∞–≥ 7. –û–±–Ω–æ–≤–ª—è–µ–º `js/game.js`

–í —Ñ–∞–π–ª–µ –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∞—Ä–µ–Ω—ã –∏ —É–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫ –ª–æ–∫–∞—Ü–∏–π.

### –®–∞–≥ 7.1. –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

–ù–∞–π–¥–∏—Ç–µ –º–µ—Å—Ç–æ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è UI –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```javascript
// –ó–∞–ø—É—Å–∫ UI
const ui = new window.UIManager();

// +++ –ù–û–í–û–ï: —Å–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞—Ä–µ–Ω—ã
const arenaController = new window.ArenaController();
```

### –®–∞–≥ 7.2. –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫ –ª–æ–∫–∞—Ü–∏–π

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `start-match-btn` –Ω–∞ —ç—Ç–æ—Ç:

```javascript
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –ª–æ–∫–∞—Ü–∏–π
document.querySelectorAll('.start-match-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        const location = e.target.closest('.location-card').dataset.location;
        const costType = e.target.dataset.costType;
        
        const hero = window.GameState.getCurrentHero();
        
        if (!hero) {
            alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–µ—Ä–æ—è –≤ –º–µ–Ω—é "–ì–µ—Ä–æ–∏"!');
            return;
        }
        
        if (window.GameState.resources[costType] < 1) {
            alert(`–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç ${costType}!`);
            return;
        }
        
        // –¢—Ä–∞—Ç–∏–º —Ä–µ—Å—É—Ä—Å
        window.GameState.updateResource(costType, -1);
        
        // +++ –ù–û–í–û–ï: –Ω–∞—á–∏–Ω–∞–µ–º –≤—ã–ª–∞–∑–∫—É –Ω–∞ –∞—Ä–µ–Ω—É
        const started = arenaController.startExpedition(location, hero);
        
        if (!started) {
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ—Å—É—Ä—Å, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞—á–∞—Ç—å
            window.GameState.updateResource(costType, 1);
        }
    });
});
```

### –®–∞–≥ 7.3. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

–í —Ñ–∞–π–ª–µ `game.js` –µ—Å—Ç—å –¥–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞. –£–¥–∞–ª–∏—Ç–µ –≤—Ç–æ—Ä–æ–π (–æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –ª–æ–∫–∞—Ü–∏–π` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É —Å –æ–ø—ã—Ç–æ–º –∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏). –û–Ω –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –Ω–∞–≥—Ä–∞–¥—ã —Ç–µ–ø–µ—Ä—å –≤—ã–¥–∞—é—Ç—Å—è –Ω–∞ –∞—Ä–µ–Ω–µ.

---

## ‚úÖ –ß—Ç–æ –º—ã –¥–æ–±–∞–≤–∏–ª–∏

| –§–∞–π–ª | –ß—Ç–æ –Ω–æ–≤–æ–≥–æ |
|------|------------|
| `arena_style.css` | –°—Ç–∏–ª–∏ –¥–ª—è –∞—Ä–µ–Ω—ã (–¥–∂–æ–π—Å—Ç–∏–∫, –ø–∞—É–∑–∞, –∫–∞–Ω–≤–∞—Å) |
| `GameEntity.js` | –ö–ª–∞—Å—Å—ã ArenaEntity, ArenaHero, ArenaEnemy, ArenaWeapon, ExpGem |
| `SpriteManager.js` | –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–π—Ç–æ–≤ |
| `SurvivorsArena.js` | –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª, —Ñ–∏–∑–∏–∫–∞, –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ |
| `ArenaController.js` | –°–≤—è–∑—å –∞—Ä–µ–Ω—ã —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–π |
| `index.html` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ —Å—Ç–∏–ª–µ–π |
| `game.js` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ |

---

## üíª –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–í—ã–±–µ—Ä–∏—Ç–µ –≥–µ—Ä–æ—è** –Ω–∞ —ç–∫—Ä–∞–Ω–µ "–ì–µ—Ä–æ–∏"
2. **–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å"** –Ω–∞ –ª—é–±–æ–π –ª–æ–∫–∞—Ü–∏–∏
3. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —ç–∫—Ä–∞–Ω –∞—Ä–µ–Ω—ã —Å –∑–µ–ª—ë–Ω—ã–º –≥–µ—Ä–æ–µ–º –≤ —Ü–µ–Ω—Ç—Ä–µ
4. **–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≥–µ—Ä–æ–µ–º** —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –∏–ª–∏ WASD
5. –í—Ä–∞–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∏ –∞—Ç–∞–∫–æ–≤–∞—Ç—å –≥–µ—Ä–æ—è
6. –ü—Ä–∏ —É–±–∏–π—Å—Ç–≤–µ –≤—Ä–∞–≥–æ–≤ –≤—ã–ø–∞–¥–∞—é—Ç –∂—ë–ª—Ç—ã–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã –æ–ø—ã—Ç–∞
7. –ü—Ä–∏ —Å–±–æ—Ä–µ –æ–ø—ã—Ç–∞ –≥–µ—Ä–æ–π –ø–æ–≤—ã—à–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å (—Ä–∞—Å—Ç—É—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏)
8. **–ù–∞–∂–º–∏—Ç–µ ESC** ‚Äî –ø–æ—è–≤–∏—Ç—Å—è –º–µ–Ω—é –ø–∞—É–∑—ã
9. **–í—ã–π–¥–∏—Ç–µ —Å –∞—Ä–µ–Ω—ã** ‚Äî –≤–µ—Ä–Ω—ë—Ç–µ—Å—å –≤ –ª–æ–±–±–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≥–µ—Ä–æ—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è

---

## üí° –ú–∏–∫—Ä–æ-–∑–∞–¥–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–í—ã–±–µ—Ä–∏—Ç–µ **–æ–¥–Ω–æ** –∑–∞–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–ª—É—á—à–∏—Ç –∫–æ–¥ –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫:

### üîπ –ó–∞–¥–∞–Ω–∏–µ 1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≥—Ä–∞–Ω–∏—Ü –º–∏—Ä–∞ –¥–ª—è –∫–∞–º–µ—Ä—ã
–°–µ–π—á–∞—Å –∫–∞–º–µ—Ä–∞ –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–∏—Ä–∞ –ø—Ä–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –≤ –º–µ—Ç–æ–¥ `updateCamera`, —á—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ.

**–ì–¥–µ:** `SurvivorsArena.js`, –º–µ—Ç–æ–¥ `updateCamera()`

---

### üîπ –ó–∞–¥–∞–Ω–∏–µ 2. –£–ª—É—á—à–∏—Ç—å —Å–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤
–í—Ä–∞–≥–∏ —Å–ø–∞–≤–Ω—è—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ –≥–µ—Ä–æ—é. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–æ—è–≤–ª—è–ª–∏—Å—å –Ω–µ –±–ª–∏–∂–µ 300 –ø–∏–∫—Å–µ–ª–µ–π –æ—Ç –≥–µ—Ä–æ—è.

**–ì–¥–µ:** `SurvivorsArena.js`, –º–µ—Ç–æ–¥ `spawnEnemy()`

---

### üîπ –ó–∞–¥–∞–Ω–∏–µ 3. –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
–í–æ –≤—Ä–µ–º—è –±–æ—è –Ω–∞ –∞—Ä–µ–Ω–µ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`document.title`) –Ω–∞ "‚öîÔ∏è X:XX - Arena Survivors", –≥–¥–µ X:XX ‚Äî —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –±–æ—è.

**–ì–¥–µ:** `SurvivorsArena.js`, –º–µ—Ç–æ–¥ `updateUI()`

---

### üîπ –ó–∞–¥–∞–Ω–∏–µ 4. –£–ª—É—á—à–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
–í —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞ —Å–µ–π—á–∞—Å –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ. –î–æ–±–∞–≤—å—Ç–µ –∑–≤—ë–∑–¥–æ—á–∫–∏: "‚òÖ" –¥–ª—è –∫–∞–∂–¥–æ–π –µ–¥–∏–Ω–∏—Ü—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "‚òÖ‚òÖ‚òÜ" –¥–ª—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ 2.5).

**–ì–¥–µ:** `SurvivorsArena.js`, –º–µ—Ç–æ–¥ `draw()`, —Å—Ç—Ä–æ–∫–∞ —Å –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

---

### üîπ –ó–∞–¥–∞–Ω–∏–µ 5. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ä—É–∂–∏—è
–ö–æ–≥–¥–∞ –æ—Ä—É–∂–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∞—Ç–∞–∫–µ (cooldown = 0), —Ä–∏—Å—É–π—Ç–µ –≤–æ–∫—Ä—É–≥ –≥–µ—Ä–æ—è –∑–µ–ª—ë–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ.

**–ì–¥–µ:** `GameEntity.js`, –º–µ—Ç–æ–¥ `ArenaHero.draw()`, –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –æ—Ä—É–∂–∏—è

---

### üéØ –ö–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å

1. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ –∑–∞–¥–∞–Ω–∏–µ
2. –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–º–µ—Ç—å—Ç–µ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–±—É–∫–≤–∞–ª—å–Ω–æ 3-10 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
4. –°–¥–µ–ª–∞–π—Ç–µ commit –∏ push
5. –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –¥–æ–º–∞—à–Ω–µ–º—É –∑–∞–¥–∞–Ω–∏—é —É–∫–∞–∂–∏—Ç–µ —É–ª—É—á—à–µ–Ω–∏–µ.

<br>

> [!TIP]
> –¢–µ—Å—Ç–∏—Ä—É–µ–º - –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ª–æ–∫–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –±–æ–µ–≤–∞—è –∞—Ä–µ–Ω–∞, –≥–µ—Ä–æ–π –≤ –±–æ—é –¥–æ–ª–∂–µ–Ω –¥–≤–∏–≥–∞—Ç—å—Å—è –∏ –∞—Ç–∞–∫–æ–≤–∞—Ç—å, –≤—Ä–∞–≥–∏ –¥–æ–ª–∂–Ω—ã —Å–ø–∞–≤–Ω–∏—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏ —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å—Å—è –≥–µ—Ä–æ–µ–º, –≥–µ—Ä–æ–π –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–ø—ã—Ç –∏ –º–∞—Ç—á –¥–æ–ª–∂–µ–Ω —Å—Ç–∞–≤–∏—Ç—å—Å—è –Ω–∞ –ø–∞—É–∑—É, –∞ —Ç–∞–∫ –∂–µ –º–∞—Ç—á –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å.  **–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤–µ—Ä—Å–∏–∏ 0.0.6 –≤ —Å–ª–µ–¥—É—é—â—É—é –≤–µ—Ç–∫—É**
