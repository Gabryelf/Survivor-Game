
# üõ°Ô∏è Arena Survivors ‚Äî –í–µ—Ä—Å–∏—è 3: –ú–∞–≥–∞–∑–∏–Ω –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞

> **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞**  
> *–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –º–∞–≥–∞–∑–∏–Ω —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º, –ø–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤*


---

## ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –≤–µ—Ä—Å–∏–∏ 3

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —É –Ω–∞—Å –±—ã–ª–∏ –≥–µ—Ä–æ–∏ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—ë–º –∏ –ø–∞—Å—Å–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –í —Ç—Ä–µ—Ç—å–µ–π –≤–µ—Ä—Å–∏–∏ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
|-----------|-----------------|
| **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤** | –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤: Item ‚Üí Weapon/Armor/Consumable/Material |
| **–ú–∞–≥–∞–∑–∏–Ω** | –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç, –ø–æ–∫—É–ø–∫–∞ –∑–∞ –ø—Ä–æ–≤–∏–∑–∏—é, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
| **–≠–∫–æ–Ω–æ–º–∏–∫–∞** | –¶–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–¥–∫–æ—Å—Ç–∏, –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞, —Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤** | –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ (–∑–µ–ª—å—è –ª–µ—á–µ–Ω–∏—è) |
| **UI –ú–∞–≥–∞–∑–∏–Ω–∞** | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏, —Ü–≤–µ—Ç–æ–≤–∞—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏ |
| **–¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** | –ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ (–¥–ª—è —Ç–µ—Å—Ç–∞) |

**–ò—Ç–æ–≥:** —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª ‚Äî –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã –ø–∞—Å—Å–∏–≤–Ω–æ, —Ç—Ä–∞—Ç–∏–º –≤ –º–∞–≥–∞–∑–∏–Ω–µ, —É–ª—É—á—à–∞–µ–º –≥–µ—Ä–æ–µ–≤.

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (`js/core/Item.js`)

**–ü–æ—á–µ–º—É –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤?**  
–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞. –û—Ä—É–∂–∏—é –Ω—É–∂–µ–Ω —É—Ä–æ–Ω –∏ –¥–∞–ª—å–Ω–æ—Å—Ç—å, –±—Ä–æ–Ω–µ ‚Äî –∑–∞—â–∏—Ç–∞, —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∞–º ‚Äî —ç—Ñ—Ñ–µ–∫—Ç—ã. –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

#### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Item
```javascript
class Item {
    constructor(id, name, type, rarity, basePrice, icon = 'üì¶') {
        this.id = id;
        this.name = name;
        this.type = type; // 'weapon', 'armor', 'consumable', 'material'
        this.rarity = rarity; // 'common', 'rare', 'epic', 'legendary'
        this.basePrice = basePrice;
        this.icon = icon;
        this.description = '';
    }
    
    getPrice() {
        return this.basePrice; // –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫–∏/–Ω–∞—Ü–µ–Ω–∫–∏
    }
}
```

#### –ù–∞—Å–ª–µ–¥–Ω–∏–∫–∏:

**–û—Ä—É–∂–∏–µ (Weapon)**
```javascript
class Weapon extends Item {
    constructor(id, name, rarity, basePrice, stats, icon = '‚öîÔ∏è') {
        super(id, name, 'weapon', rarity, basePrice, icon);
        this.damage = stats.damage || 0;
        this.range = stats.range || 1; // 1 - –±–ª–∏–∂–Ω–∏–π –±–æ–π, 2+ - –¥–∞–ª—å–Ω–∏–π
        this.attackSpeed = stats.attackSpeed || 1.0;
        this.description = `–£—Ä–æ–Ω: ${this.damage}, –î–∞–ª—å–Ω–æ—Å—Ç—å: ${this.range}`;
    }
}
```

**–ë—Ä–æ–Ω—è (Armor)**
```javascript
class Armor extends Item {
    constructor(id, name, rarity, basePrice, stats, icon = 'üõ°Ô∏è') {
        super(id, name, 'armor', rarity, basePrice, icon);
        this.defense = stats.defense || 0;
        this.bonusHp = stats.bonusHp || 0;
        this.description = `–ó–∞—â–∏—Ç–∞: ${this.defense}, HP: +${this.bonusHp}`;
    }
}
```

**–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ (Consumable)**
```javascript
class Consumable extends Item {
    constructor(id, name, rarity, basePrice, effect, value, icon = 'üß™') {
        super(id, name, 'consumable', rarity, basePrice, icon);
        this.effect = effect; // 'heal', 'buff', 'resource'
        this.value = value;
        this.usableInBattle = true;
        this.description = `${effect === 'heal' ? '–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç' : '–î–∞–µ—Ç'} ${value}`;
    }
}
```

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã (Material)**
```javascript
class Material extends Item {
    constructor(id, name, rarity, basePrice, icon = 'üî®') {
        super(id, name, 'material', rarity, basePrice, icon);
        this.description = '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞';
    }
}
```

---

### 2. –ö–ª–∞—Å—Å Shop –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞ (`js/core/Shop.js`)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–∞–≥–∞–∑–∏–Ω:**
- –•—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
- –§–æ—Ä–º–∏—Ä—É–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç (—Å–ª—É—á–∞–π–Ω—ã–µ 6 –ø—Ä–µ–¥–º–µ—Ç–æ–≤)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–∫—É–ø–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –ø–æ —Ç–∞–π–º–µ—Ä—É

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```javascript
class Shop {
    constructor() {
        this.items = []; // –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
        this.dailyItems = []; // –ü—Ä–µ–¥–º–µ—Ç—ã –≤ –ø—Ä–æ–¥–∞–∂–µ —Å–µ–≥–æ–¥–Ω—è
        this.lastUpdate = Date.now();
        this.initializeShop();
    }
    
    initializeShop() {
        // –°–æ–∑–¥–∞–µ–º –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        this.items = [
            new Weapon('weapon_sword_1', '–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –º–µ—á', 'common', 10, { damage: 5 }),
            new Weapon('weapon_bow_1', '–ö–æ—Ä–æ—Ç–∫–∏–π –ª—É–∫', 'common', 15, { damage: 7, range: 3 }),
            new Armor('armor_leather_1', '–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è', 'common', 15, { defense: 5 }),
            new Consumable('consumable_hp_small', '–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è', 'common', 5, 'heal', 30)
            // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
        ];
        
        this.refreshDailyItems();
    }
}
```

#### –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
```javascript
buyItem(itemId, heroId) {
    const item = this.dailyItems.find(i => i.id === itemId);
    if (!item) return { success: false, message: '–ü—Ä–µ–¥–º–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω' };
    
    const price = item.getPrice();
    const hero = window.GameState.heroes.find(h => h.id === heroId);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
    if (window.GameState.resources.proviziya < price) {
        return { success: false, message: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–≤–∏–∑–∏–∏' };
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
    const added = hero.addToInventory({ ...item }); // –ö–æ–ø–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞!
    
    if (!added) {
        return { success: false, message: '–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –≥–µ—Ä–æ—è –ø–æ–ª–æ–Ω' };
    }
    
    // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
    window.GameState.updateResource('proviziya', -price);
    
    return { success: true, message: `–ö—É–ø–ª–µ–Ω ${item.name}` };
}
```

**–í–∞–∂–Ω–æ:** –°–æ–∑–¥–∞—ë–º –∫–æ–ø–∏—é –ø—Ä–µ–¥–º–µ—Ç–∞ (`{ ...item }`), —á—Ç–æ–±—ã –ø—Ä–µ–¥–º–µ—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∏ –ø—Ä–µ–¥–º–µ—Ç —É –≥–µ—Ä–æ—è –±—ã–ª–∏ —Ä–∞–∑–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞
```javascript
refreshDailyItems() {
    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∏ –±–µ—Ä–µ–º 6 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    const shuffled = [...this.items].sort(() => 0.5 - Math.random());
    this.dailyItems = shuffled.slice(0, 6);
    this.lastUpdate = Date.now();
}

checkAndRefresh() {
    // –î–ª—è —Ç–µ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
    const testInterval = 30 * 1000;
    
    if (Date.now() - this.lastUpdate > testInterval) {
        this.refreshDailyItems();
        return true;
    }
    return false;
}
```

---

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GameState

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ GameState:**

1. **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ `shop`**
   ```javascript
   shop: null, // –ë—É–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ game.js
   ```

2. **–ú–µ—Ç–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
   ```javascript
   initShop() {
       this.shop = new window.Shop();
       this.notify();
   }
   ```

3. **–ü–∞—Å—Å–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∞–≥–∞–∑–∏–Ω**
   ```javascript
   passiveUpdate() {
       // ... –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ ...
       
       if (this.shop) {
           const refreshed = this.shop.checkAndRefresh();
           if (refreshed) {
               console.log('–ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –º–∞–≥–∞–∑–∏–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω!');
           }
       }
       
       this.notify();
   }
   ```

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π UIManager

**–ì–ª–∞–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:** –º–µ—Ç–æ–¥ `renderShop()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞.

#### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
```javascript
renderShop() {
    const container = document.getElementById('shopItems');
    container.innerHTML = '';
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–±—Ä–∞–Ω –ª–∏ –≥–µ—Ä–æ–π
    const currentHero = window.GameState.getCurrentHero();
    if (!currentHero) {
        container.innerHTML = '<p>–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–µ—Ä–æ—è</p>';
        return;
    }
    
    window.GameState.shop.dailyItems.forEach(item => {
        const itemCard = document.createElement('div');
        itemCard.className = 'shop-item';
        
        // –¶–≤–µ—Ç–æ–≤–∞—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏
        let rarityColor = '#ffffff';
        if (item.rarity === 'rare') rarityColor = '#4caaff';
        if (item.rarity === 'epic') rarityColor = '#aa4cff';
        if (item.rarity === 'legendary') rarityColor = '#ffaa4c';
        
        itemCard.innerHTML = `
            <div style="font-size: 3rem;">${item.icon}</div>
            <h3 style="color: ${rarityColor};">${item.name}</h3>
            <p class="item-type">${item.type}</p>
            <p class="item-description">${item.description}</p>
            <p class="item-price">üí∞ ${item.getPrice()} –ø—Ä–æ–≤–∏–∑–∏–∏</p>
            <p class="item-rarity" style="color: ${rarityColor};">${item.rarity}</p>
            <button class="buy-item-btn" data-item-id="${item.id}">–ö—É–ø–∏—Ç—å</button>
        `;
        
        container.appendChild(itemCard);
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    this.addShopTimer();
}
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏
```javascript
// –í –º–µ—Ç–æ–¥–µ renderShop –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
document.querySelectorAll('.buy-item-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        const itemId = e.target.dataset.itemId;
        const currentHero = window.GameState.getCurrentHero();
        
        const result = window.GameState.shop.buyItem(itemId, currentHero.id);
        
        if (result.success) {
            alert(result.message);
            this.renderShop(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        } else {
            alert(result.message);
        }
    });
});
```

#### –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```javascript
addShopTimer() {
    const lastUpdate = window.GameState.shop.lastUpdate;
    const timeLeft = Math.max(0, 30 - Math.floor((Date.now() - lastUpdate) / 1000));
    
    const timerHTML = `
        <div class="shop-info">
            <p>üîÑ –ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –æ–±–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑: <span id="shopTimer">${timeLeft}</span>—Å</p>
        </div>
    `;
    
    container.innerHTML += timerHTML;
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
    setInterval(() => {
        const timerElement = document.getElementById('shopTimer');
        if (timerElement) {
            const newTimeLeft = Math.max(0, 30 - Math.floor((Date.now() - lastUpdate) / 1000));
            timerElement.textContent = newTimeLeft;
            
            if (newTimeLeft <= 0) {
                this.renderShop(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
            }
        }
    }, 1000);
}
```

---

### 5. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ game.js

**–ß—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ –≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã**
   ```javascript
   warrior.addToInventory(
       new Consumable('consumable_hp_small', '–ú–∞–ª–æ–µ –∑–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è', 'common', 5, 'heal', 30, 'üíó')
   );
   
   warrior.addToInventory(
       new Weapon('weapon_sword_1', '–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –º–µ—á', 'common', 10, { damage: 5, range: 1 }, '‚öîÔ∏è')
   );
   ```

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞**
   ```javascript
   window.GameState.initShop();
   ```

3. **–û–ø—ã—Ç –∑–∞ –º–∞—Ç—á–∏** (–¥–ª—è —Ç–µ—Å—Ç–∞ –ø—Ä–æ–∫–∞—á–∫–∏)
   ```javascript
   // –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –º–∞—Ç—á–∞
   currentHero.addExp(10);
   alert(`–ú–∞—Ç—á –Ω–∞—á–∞—Ç! –ü–æ–ª—É—á–µ–Ω–æ 10 –æ–ø—ã—Ç–∞.`);
   ```

---

## üèó –ù–æ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ Item

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–æ:**
- –ö–∞–∂–¥—ã–π —Ç–∏–ø –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–º

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –º–æ–∂–Ω–æ –±—ã–ª–æ —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω –∫–ª–∞—Å—Å —Å –∫—É—á–µ–π –ø–æ–ª–µ–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Ç–∏–ø–∞, –Ω–æ —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –±—ã –∫ "–±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É".

### 2. –ú–∞–≥–∞–∑–∏–Ω –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Ç–æ—Ä–≥–æ–≤–ª–∏
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞–≥–∞–∑–∏–Ω–æ–≤ –∏–ª–∏ —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤

### 3. –¶–≤–µ—Ç–æ–≤–∞—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏

–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞. –¶–≤–µ—Ç–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏ —Å—Ç–∞–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ –∏–≥—Ä–∞—Ö:
- Common (–æ–±—ã—á–Ω—ã–π) ‚Äî –±–µ–ª—ã–π
- Rare (—Ä–µ–¥–∫–∏–π) ‚Äî —Å–∏–Ω–∏–π
- Epic (—ç–ø–∏—á–µ—Å–∫–∏–π) ‚Äî —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
- Legendary (–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π) ‚Äî –∑–æ–ª–æ—Ç–æ–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π

### 4. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ

```javascript
hero.addToInventory({ ...item }); // –°–æ–∑–¥–∞—ë–º –∫–æ–ø–∏—é
```

–≠—Ç–æ –≤–∞–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ü—Ä–µ–¥–º–µ—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–µ –æ—Å—Ç–∞—ë—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–∫—É–ø–æ–∫
- –ö–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (–ø—Ä–æ—á–Ω–æ—Å—Ç—å, –∑–∞—á–∞—Ä–æ–≤–∞–Ω–∏–µ)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø: –°–∏—Å—Ç–µ–º–∞ –∫—Ä–∞—Ñ—Ç–∞

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –º–∞–≥–∞–∑–∏–Ω –∏ –ø—Ä–µ–¥–º–µ—Ç—ã, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

### –ß—Ç–æ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –≤–µ—Ä—Å–∏–∏ 4

#### 1. –ö–ª–∞—Å—Å CraftSystem (`js/core/CraftSystem.js`)
```javascript
class CraftSystem {
    constructor() {
        this.recipes = []; // –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
        this.unlockedRecipes = []; // –û—Ç–∫—Ä—ã—Ç—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
    }
    
    // –†–µ—Ü–µ–ø—Ç: –∏–∑ –∫–∞–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∫–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç—Å—è
    addRecipe(recipe) {
        this.recipes.push(recipe);
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å—Ç—å –ª–∏ –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
    canCraft(recipeId, hero) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ GameState
    }
    
    // –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
    craft(recipeId, hero) {
        // –ó–∞–±–∏—Ä–∞–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç –≥–µ—Ä–æ—é
    }
    
    // –û—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞ —É—Ä–æ–≤–µ–Ω—å –∏–ª–∏ –Ω–∞–π–¥–µ–Ω –≤ –±–æ—é)
    unlockRecipe(recipeId) {
        this.unlockedRecipes.push(recipeId);
    }
}
```

#### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—Ü–µ–ø—Ç–∞
```javascript
class Recipe {
    constructor(id, name, resultItemId, materials, skillRequirement = null) {
        this.id = id;
        this.name = name;
        this.resultItemId = resultItemId; // ID –ø—Ä–µ–¥–º–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç—Å—è
        this.materials = materials; // [{ materialId: 'wood', amount: 5 }, ...]
        this.skillRequirement = skillRequirement; // –ö–∞–∫–æ–π –Ω–∞–≤—ã–∫ –Ω—É–∂–µ–Ω
    }
}
```

#### 3. –≠–∫—Ä–∞–Ω –∫—Ä–∞—Ñ—Ç–∞ (`js/ui/CraftScreen.js`)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤

#### 4. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ GameState
```javascript
inventory: {
    wood: 0,
    metal: 0,
    cloth: 0,
    leather: 0,
    // ... –¥—Ä—É–≥–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
}
```

#### 5. –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ò–∑ –º–∞–≥–∞–∑–∏–Ω–∞ (—É–∂–µ –µ—Å—Ç—å)
- –ö–∞–∫ –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ –º–∞—Ç—á–∏
- –†–∞–∑–±–æ—Ä –Ω–µ–Ω—É–∂–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–¥–∏—Å enchant)

---

## üéØ –ó–∞–¥–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

1. **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ –º–∞–≥–∞–∑–∏–Ω**
   - –°–æ–∑–¥–∞—Ç—å "–î–≤—É—Ä—É—á–Ω—ã–π –º–µ—á" (—ç–ø–∏—á–µ—Å–∫–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏) —Å –±–æ–ª—å—à–∏–º —É—Ä–æ–Ω–æ–º
   - –î–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤ `items` –≤ `Shop.initializeShop()`

2. **–£–ª—É—á—à–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏–∫—É**
   - –°–µ–π—á–∞—Å —Ü–µ–Ω–∞ —ç—Ç–æ —Ä–µ—Å—É—Ä—Å—ã, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é –≤–∞–ª—é—Ç—É - –∑–æ–ª–æ—Ç–æ
   - –ó–∞–º–µ–Ω–∏—Ç—å —É–ø–ª–∞—Ç—É —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∑–∞ –≤–µ—â–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –Ω–∞ —É–ø–ª–∞—Ç—É –∑–æ–ª–æ—Ç–æ–º.
   - 
3. **–°–∫–∏–¥–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ**
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `getPrice()` —Ç–∞–∫, —á—Ç–æ–±—ã –∏–Ω–æ–≥–¥–∞ (10% —à–∞–Ω—Å) –±—ã–ª–∞ —Å–∫–∏–¥–∫–∞ 50%
   - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∑–∞—á—ë—Ä–∫–Ω—É—Ç—É—é —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É –∏ –Ω–æ–≤—É—é –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º

4. **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤**
   - –°–µ–π—á–∞—Å –ø—Ä–µ–¥–º–µ—Ç—ã –ø—Ä–æ—Å—Ç–æ –ª–µ–∂–∞—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫–∏–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ä—É–∂–∏–µ –∏ –±—Ä–æ–Ω—é (–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º –∏–ª–∏ –∫–Ω–æ–ø–∫–æ–π)
   - –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—ã –≥–µ—Ä–æ—è –ø—Ä–∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ

---

## üí° –ò—Ç–æ–≥–∏ –≤–µ—Ä—Å–∏–∏ 3

–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –≤–∞–∂–Ω–µ–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç –ª—é–±–æ–π –∏–≥—Ä—ã ‚Äî **—ç–∫–æ–Ω–æ–º–∏–∫—É**:

- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –ú–∞–≥–∞–∑–∏–Ω —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ –∑–∞ —Ä–µ—Å—É—Ä—Å—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
- ‚úÖ –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏

**–¢–µ–ø–µ—Ä—å –∏–≥—Ä–∞ –ø–æ—Ö–æ–∂–∞ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π RPG-–∫–ª–∏–∫–µ—Ä** ‚Äî –∫–æ–ø–∏–º —Ä–µ—Å—É—Ä—Å—ã, –ø–æ–∫—É–ø–∞–µ–º —à–º–æ—Ç, –ø—Ä–æ–∫–∞—á–∏–≤–∞–µ–º –≥–µ—Ä–æ–µ–≤.

–°–ª–µ–¥—É—é—â–∏–π –±–æ–ª—å—à–æ–π —à–∞–≥ ‚Äî **–∫—Ä–∞—Ñ—Ç**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –¥–æ–±–∞–≤–∏—Ç –≥–ª—É–±–∏–Ω—É —ç–∫–æ–Ω–æ–º–∏–∫–µ.

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –ø–æ —Ç–µ–º–µ

- [–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ JavaScript (ES6)](https://learn.javascript.ru/class-inheritance)
- [–ü–∞—Ç—Ç–µ—Ä–Ω "–§–∞–±—Ä–∏–∫–∞" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤](https://refactoring.guru/ru/design-patterns/factory-method)
- [–†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –∏ —Ç–∞–π–º–µ—Ä–∞–º–∏](https://learn.javascript.ru/settimeout-setinterval)
- [localStorage –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫](https://developer.mozilla.org/ru/docs/Web/API/Window/localStorage)

---
